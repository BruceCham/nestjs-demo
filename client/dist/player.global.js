!function(t){"use strict";function e(t,e,i,n){var s,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(r<3?s(a):r>3?s(e,i,a):s(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a}function i(t,e,i,n){return new(i||(i=Promise))((function(s,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function o(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))}var n,s,r,a;!function(t){t[t.HEAD=0]="HEAD",t[t.SNAPSHOT=1]="SNAPSHOT",t[t.WINDOW=2]="WINDOW",t[t.SCROLL=3]="SCROLL",t[t.MOUSE=4]="MOUSE",t[t.DOM=5]="DOM",t[t.FORM_EL=6]="FORM_EL",t[t.LOCATION=7]="LOCATION",t[t.AUDIO=8]="AUDIO",t[t.CANVAS=9]="CANVAS",t[t.TERMINATE=10]="TERMINATE",t[t.FONT=11]="FONT",t[t.PATCH=12]="PATCH",t[t.CUSTOM=13]="CUSTOM",t[t.WEBGL=14]="WEBGL",t[t.CANVAS_SNAPSHOT=15]="CANVAS_SNAPSHOT",t[t.VIDEO=16]="VIDEO",t[t.MarkSnapRecord=17]="MarkSnapRecord"}(n||(n={})),function(t){t[t.PROP=0]="PROP",t[t.INPUT=1]="INPUT",t[t.CHANGE=2]="CHANGE",t[t.FOCUS=3]="FOCUS",t[t.BLUR=4]="BLUR"}(s||(s={})),function(t){t[t.MOVE=0]="MOVE",t[t.CLICK=1]="CLICK"}(r||(r={})),function(t){t.READONLY="readonly",t.READWRITE="readwrite",t.VERSIONCHANGE="versionchange"}(a||(a={}));function o(t){const e=t.message||t;return console.error(`TimeCat Error: ${e}`),e}function l(){return Date.now()}function d(){return((t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce(((t,e)=>t+((e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_")),""))().toUpperCase()}function c(t){const e=t.split(":");if(2===e.length){const[t,i]=e;return 1e3*(60*+t+ +i)}const[i,n,s]=e;return 1e3*(3600*+i+60*+n+ +s)}function h(t){return t.type===n.SNAPSHOT&&!t.data.frameId}function u(t=200){return i(this,void 0,void 0,(function*(){return new Promise((e=>{setTimeout((()=>e()),t)}))}))}function p(t,e,i={isImmediate:!1,isTrailing:!1}){let n;return function(...s){const r=this,a=i.isImmediate&&void 0===n;void 0!==n&&clearTimeout(n),n=setTimeout((function(){n=void 0,i.isImmediate&&!i.isTrailing||t.apply(r,s)}),e),a&&t.apply(r,s)}}function f(t,e){try{return new URL(t,e)}catch(t){o(t)}return{href:t,pathname:t}}function m(){console.log("%c\n  _  ___   ___  \n/ |/ _  / _  \n| | | | | | | |\n| | |_| | |_| |\n|_|___/ ___/    作业帮 💯\n    ","color: #1475b2;"),function(t){const{title:e,content:i,titleColor:n,backgroundColor:s}=t,r=n||"#606060",a=s||"#1475b2",o=["%c ".concat(e," %c ").concat(i," "),"padding: 1px; border-radius: 3px 0 0 3px; color: #fff; background: ".concat(r,";"),"padding: 1px; border-radius: 0 3px 3px 0; color: #fff; background: ".concat(a,";")];console.log.apply(void 0,o)}({title:"O(∩_∩)O",content:"让优质教育触手可及"})}const g=()=>{},y=["direction","fillStyle","filter","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createImageData","createLinearGradient","createPattern","createRadialGradient","drawFocusIfNeeded","drawImage","ellipse","fill","fillRect","fillText","getImageData","getLineDash","getTransform","isPointInPath","isPointInStroke","lineTo","measureText","moveTo","putImageData","quadraticCurveTo","rect","resetTransform","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeRect","strokeText","transform","translate"],b=()=>{var t;return(null===(t=window.G_REPLAY_DATA&&window.G_REPLAY_DATA.snapshot.data)||void 0===t?void 0:t.href)||location.href};function w(t,e,i){return t.replace(/(url\(['"]?((\/{1,2}|\.\.?\/)?.*?)(^\?.*?)?['"]?(?=\)))/g,((t,n,s)=>{const r=f(s,e||b());return s.startsWith("data:")?t:t.replace(s,i?i(r.href):r.href)}))}function v(t,e){return t.startsWith("data")?t:(e&&setTimeout((()=>{const i=e.getRootNode().defaultView,{href:n,path:s}=(null==i?void 0:i.G_REPLAY_LOCATION)||{};if(s&&n){const i=f(s,n).href;e.getAttributeNames().filter((t=>~["src","href"].indexOf(t))).forEach((n=>{const s=f(t,i).href;e.getAttribute(n)!==s&&e.setAttribute(n,s)}))}})),f(t,b()).href)}function _(t){return i(this,void 0,void 0,(function*(){if(!t)return!1;if(t.length>500)return!1;const e=v(t);if(function(t){try{new URL(t)}catch(t){return!1}return!0}(e))try{return yield x(e)}catch(t){return!1}return!1}))}function x(t){return i(this,void 0,void 0,(function*(){return yield fetch(t).then((t=>i(this,void 0,void 0,(function*(){return(yield t.text()).replace(/<\/script>/g,"<\\/script>")}))),(e=>(o(e),t)))}))}function k(t,e){return function(t,{channelCount:e,sampleBits:i,sampleRate:n}){const s=new ArrayBuffer(44+t.byteLength),r=!0,a=new DataView(s);E(a,0,"RIFF"),a.setUint32(4,36+2*t.byteLength,r),E(a,8,"WAVE"),E(a,12,"fmt "),a.setUint32(16,16,r),a.setUint16(20,1,r),a.setUint16(22,e,r),a.setUint32(24,n,r),a.setUint32(28,n*e*(i/8),r),a.setUint16(32,e*(i/8),r),a.setUint16(34,i,r),E(a,36,"data"),a.setUint32(40,t.byteLength,r);const o=t.byteLength;let l=44;for(let e=0;e<o;e++)a.setUint8(l,t.getUint8(e)),l++;return a}(function(t,e){const{sampleBits:i}=e,n=new DataView(new ArrayBuffer(t.length*(i/8)));let s=0;if(8===i)for(let e=0;e<t.length;e++,s++){const i=Math.max(-1,Math.min(1,t[e]));let r=i<0?128*i:127*i;r=+r+128,n.setInt8(s,r)}else for(let e=0;e<t.length;e++,s+=2){const i=Math.max(-1,Math.min(1,t[e]));n.setInt16(s,i<0?32768*i:32767*i,!0)}return n}(function(t){const e=new Float32Array(t.length*t[0].length);let i=0;for(let n=0;n<t.length;n++)e.set(t[n],i),i+=t[n].length;return e}(t),e),e)}function E(t,e,i){const n=i.length;for(let s=0;s<n;s++)t.setUint8(e+s,i.charCodeAt(s))}function T(t){return new Float32Array(S(t))}function S(t){const e=atob(t),i=e.length,n=new ArrayBuffer(i),s=new DataView(n);for(let t=0;t<i;t++)s.setUint8(t,e.charCodeAt(t));return n}class A{constructor(t,e=60){this.index=0,this.fps=e,this.animate=t}start(){let t=performance.now();const e=1e3/this.fps,i=n=>{this.requestID=requestAnimationFrame(i);const s=n-t;s>=e-.1&&(t=n-s%e,this.animate(s,this.index++))};this.requestID=requestAnimationFrame(i)}stop(){cancelAnimationFrame(this.requestID)}}const O=[["type","type",{unique:!1}],["data","data",{unique:!1}],["relatedId","relatedId",{unique:!1}],["time","time",{unique:!1}]];var D;!function(t){t[t.ADD=0]="ADD",t[t.DELETE=1]="DELETE",t[t.CLEAR=2]="CLEAR"}(D||(D={}));class R extends class{constructor(t,e,i){this.DBName=t,this.version=e,this.storeName=i,this.init()}init(){return i(this,void 0,void 0,(function*(){this.dbResolve=this.initDB(),this.db=yield this.dbResolve}))}initDB(){const t=window.indexedDB.open(this.DBName,this.version);return t.onupgradeneeded=t=>{const e=t.target.result;if(!e.objectStoreNames.contains(this.storeName)){const t=e.createObjectStore(this.storeName,{autoIncrement:!0,keyPath:"id"});O.forEach((e=>t.createIndex(...e)))}},new Promise(((e,i)=>{t.onsuccess=()=>{e(t.result)},t.onerror=()=>{const t="open indexedDB on error";o(t)&&i(t)}}))}getIDBObjectStore(t){const e=this.db.transaction(this.storeName,t);return e.onabort=e.onerror=()=>{o(e.error)},e.objectStore(this.storeName)}}{constructor(t,e,i){super(t,e,i),this.tasks=[],this.triggerTask=(()=>{let t=0;return()=>{if(this.db){let t=Promise.resolve();for(;this.tasks.length;){const e=this.tasks.shift();t=t.then((()=>this.execTask(e)))}}else clearInterval(t),t=window.setTimeout((()=>this.triggerTask()),0)}})()}add(t){this.addTask(D.ADD,t)}delete(t){this.addTask(D.DELETE,t)}clear(){this.addTask(D.CLEAR)}count(){return i(this,void 0,void 0,(function*(){const t=this.getIDBObjectStore(a.READONLY);return new Promise((e=>{t.count().onsuccess=t=>{e(t.target.result)}}))}))}last(){return i(this,void 0,void 0,(function*(){const t=this.getIDBObjectStore(a.READONLY);return new Promise(((e,i)=>{const n=t.openKeyCursor(null,"prev");n.onsuccess=()=>{const s=n.result;if(!s)return i("DB is empty");const r=t.get(s.key);r.onsuccess=()=>{e(r.result)}}}))}))}readAll(){return i(this,void 0,void 0,(function*(){yield this.dbResolve;const t=this.getIDBObjectStore(a.READONLY);return new Promise((e=>{t.getAll().onsuccess=t=>{e(t.target.result)}})).then((t=>t.length?t:null))}))}getMarkRecord(t){var e;return i(this,void 0,void 0,(function*(){const{limit:i}=t,n=l();(null===(e=this.db)||void 0===e?void 0:e.transaction)||(yield this.dbResolve);const s=this.getIDBObjectStore(a.READONLY);return new Promise((t=>{s.getAll().onsuccess=e=>{const s=e.target.result,r=s.findIndex((t=>n-(null==t?void 0:t.time)<=i));t(r>0?s[r-1]:null)}})).then((t=>t))}))}execTask(t){switch(t.type){case D.ADD:return this.execAddTask(t.data);case D.DELETE:return this.execDeleteTask(t.data);case D.CLEAR:return this.execClearTask();default:return Promise.resolve()}}addTask(t,e){this.tasks.push({type:t,data:e}),this.triggerTask()}execAddTask(t){return i(this,void 0,void 0,(function*(){const e=this.getIDBObjectStore(a.READWRITE),i=t.callbackFn;delete t.callbackFn,e.add(t).onsuccess=e=>{const n=e.target.result;i&&i(Object.assign(Object.assign({},t),{id:n}))}}))}execDeleteTask(t){return i(this,void 0,void 0,(function*(){const{lowerBound:e,upperBound:i}=t||{};if(e||i){let t;t=e&&i?IDBKeyRange.bound(e,i):i?IDBKeyRange.upperBound(i,!0):IDBKeyRange.lowerBound(e,!0);this.getIDBObjectStore(a.READWRITE).delete(t)}else o("Options lowerBound or upperBound is required")}))}execClearTask(){return i(this,void 0,void 0,(function*(){this.getIDBObjectStore(a.READWRITE).clear()}))}}let I;class L{constructor(){this.createNodeId=()=>L.nodeId++,this.init()}init(){this.nodeMap=new Map,this.idMap=new WeakMap}reset(){this.nodeMap.clear()}getNode(t){return this.nodeMap.get(t)||null}addNode(t,e=this.createNodeId()){return this.idMap.set(t,e),this.nodeMap.set(e,t),e}removeNode(t){this.nodeMap.delete(t),this.idMap.delete(this.getNode(t))}getNodeId(t){return this.idMap.get(t)}updateNode(t,e){this.idMap.set(e,t),this.nodeMap.set(t,e)}}L.nodeId=1;const C=new L;var P,N=(function(t,e){t.exports={polyfill:function(){var t=window,e=document;if(!("scrollBehavior"in e.documentElement.style)||!0===t.__forceSmoothScrollPolyfill__){var i,n=t.HTMLElement||t.Element,s={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:n.prototype.scroll||o,scrollIntoView:n.prototype.scrollIntoView},r=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now,a=(i=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(i)?1:0);t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?f.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):s.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))},t.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?s.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):f.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},n.prototype.scroll=n.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==l(arguments[0])){var t=arguments[0].left,e=arguments[0].top;f.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");s.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},n.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):s.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},n.prototype.scrollIntoView=function(){if(!0!==l(arguments[0])){var i=u(this),n=i.getBoundingClientRect(),r=this.getBoundingClientRect();i!==e.body?(f.call(this,i,i.scrollLeft+r.left-n.left,i.scrollTop+r.top-n.top),"fixed"!==t.getComputedStyle(i).position&&t.scrollBy({left:n.left,top:n.top,behavior:"smooth"})):t.scrollBy({left:r.left,top:r.top,behavior:"smooth"})}else s.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function o(t,e){this.scrollLeft=t,this.scrollTop=e}function l(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function d(t,e){return"Y"===e?t.clientHeight+a<t.scrollHeight:"X"===e?t.clientWidth+a<t.scrollWidth:void 0}function c(e,i){var n=t.getComputedStyle(e,null)["overflow"+i];return"auto"===n||"scroll"===n}function h(t){var e=d(t,"Y")&&c(t,"Y"),i=d(t,"X")&&c(t,"X");return e||i}function u(t){for(;t!==e.body&&!1===h(t);)t=t.parentNode||t.host;return t}function p(e){var i,n,s,a=(r()-e.startTime)/468;i=function(t){return.5*(1-Math.cos(Math.PI*t))}(a=a>1?1:a),e.method.call(e.scrollable,n=e.startX+(e.x-e.startX)*i,s=e.startY+(e.y-e.startY)*i),n===e.x&&s===e.y||t.requestAnimationFrame(p.bind(t,e))}function f(i,n,a){var l,d,c,h,u=r();i===e.body?(l=t,d=t.scrollX||t.pageXOffset,c=t.scrollY||t.pageYOffset,h=s.scroll):(l=i,d=i.scrollLeft,c=i.scrollTop,h=o),p({scrollable:l,method:h,startTime:u,startX:d,startY:c,x:n,y:a})}}}}(P={exports:{}},P.exports),P.exports);class M{constructor(){this.interval=1e3,this.len=0,this.resolved=!1,this.listener=[],this.timer=null,this.observe()}clearTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}destroy(){this.listener.length=0}observe(){this.timer=window.setTimeout((()=>{const t=performance.getEntriesByType("resource").filter((t=>this.isMatchType(t))).length;if(t<=this.len)return performance.clearResourceTimings(),this.clearTimer(),this.resolved=!0,void(this.listener.length&&this.listener.forEach((t=>t())));this.len=t,this.observe()}),this.interval)}isMatchType(t){switch(t.initiatorType){case"link":case"img":case"css":case"iframe":return!0}}ready(t){if(this.resolved)return t();this.listener.push(t)}}const z=new class{constructor(){this.id=1,this.listenersMap=new Map}on(t,e){return this.getListenersByKey(t).set(++this.id,e),this.id}emit(t,...e){this.getListenersByKey(t).forEach((t=>{t(...e)}))}once(t,e){const i=this.on(t,((...n)=>{e(...n),this.off(t,i)}));return i}flush(t){this.getListenersByKey(t).clear()}destroy(){this.listenersMap.clear()}off(t,e){this.getListenersByKey(t).delete(e)}getListenersByKey(t){const e=this.listenersMap.get(t)||new Map;return this.listenersMap.set(t,e),e}};function B(t){let e=t.length;for(;--e>=0;)t[e]=0}const U=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),F=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),j=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),H=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Z=new Array(576);B(Z);const V=new Array(60);B(V);const W=new Array(512);B(W);const Y=new Array(256);B(Y);const G=new Array(29);B(G);const K=new Array(30);function q(t,e,i,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=s,this.has_stree=t&&t.length}let J,X,Q;function $(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}B(K);const tt=t=>t<256?W[t]:W[256+(t>>>7)],et=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},it=(t,e,i)=>{t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,et(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)},nt=(t,e,i)=>{it(t,i[2*e],i[2*e+1])},st=(t,e)=>{let i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1},rt=(t,e,i)=>{const n=new Array(16);let s,r,a=0;for(s=1;s<=15;s++)n[s]=a=a+i[s-1]<<1;for(r=0;r<=e;r++){let e=t[2*r+1];0!==e&&(t[2*r]=st(n[e]++,e))}},at=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},ot=t=>{t.bi_valid>8?et(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},lt=(t,e,i,n)=>{const s=2*e,r=2*i;return t[s]<t[r]||t[s]===t[r]&&n[e]<=n[i]},dt=(t,e,i)=>{const n=t.heap[i];let s=i<<1;for(;s<=t.heap_len&&(s<t.heap_len&&lt(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!lt(e,n,t.heap[s],t.depth));)t.heap[i]=t.heap[s],i=s,s<<=1;t.heap[i]=n},ct=(t,e,i)=>{let n,s,r,a,o=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],s=t.pending_buf[t.l_buf+o],o++,0===n?nt(t,s,e):(r=Y[s],nt(t,r+256+1,e),a=U[r],0!==a&&(s-=G[r],it(t,s,a)),n--,r=tt(n),nt(t,r,i),a=F[r],0!==a&&(n-=K[r],it(t,n,a)))}while(o<t.last_lit);nt(t,256,e)},ht=(t,e)=>{const i=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.elems;let a,o,l,d=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<r;a++)0!==i[2*a]?(t.heap[++t.heap_len]=d=a,t.depth[a]=0):i[2*a+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=d<2?++d:0,i[2*l]=1,t.depth[l]=0,t.opt_len--,s&&(t.static_len-=n[2*l+1]);for(e.max_code=d,a=t.heap_len>>1;a>=1;a--)dt(t,i,a);l=r;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],dt(t,i,1),o=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=o,i[2*l]=i[2*a]+i[2*o],t.depth[l]=(t.depth[a]>=t.depth[o]?t.depth[a]:t.depth[o])+1,i[2*a+1]=i[2*o+1]=l,t.heap[1]=l++,dt(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const i=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,r=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let d,c,h,u,p,f,m=0;for(u=0;u<=15;u++)t.bl_count[u]=0;for(i[2*t.heap[t.heap_max]+1]=0,d=t.heap_max+1;d<573;d++)c=t.heap[d],u=i[2*i[2*c+1]+1]+1,u>l&&(u=l,m++),i[2*c+1]=u,c>n||(t.bl_count[u]++,p=0,c>=o&&(p=a[c-o]),f=i[2*c],t.opt_len+=f*(u+p),r&&(t.static_len+=f*(s[2*c+1]+p)));if(0!==m){do{for(u=l-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[l]--,m-=2}while(m>0);for(u=l;0!==u;u--)for(c=t.bl_count[u];0!==c;)h=t.heap[--d],h>n||(i[2*h+1]!==u&&(t.opt_len+=(u-i[2*h+1])*i[2*h],i[2*h+1]=u),c--)}})(t,e),rt(i,d,t.bl_count)},ut=(t,e,i)=>{let n,s,r=-1,a=e[1],o=0,l=7,d=4;for(0===a&&(l=138,d=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)s=a,a=e[2*(n+1)+1],++o<l&&s===a||(o<d?t.bl_tree[2*s]+=o:0!==s?(s!==r&&t.bl_tree[2*s]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,r=s,0===a?(l=138,d=3):s===a?(l=6,d=3):(l=7,d=4))},pt=(t,e,i)=>{let n,s,r=-1,a=e[1],o=0,l=7,d=4;for(0===a&&(l=138,d=3),n=0;n<=i;n++)if(s=a,a=e[2*(n+1)+1],!(++o<l&&s===a)){if(o<d)do{nt(t,s,t.bl_tree)}while(0!=--o);else 0!==s?(s!==r&&(nt(t,s,t.bl_tree),o--),nt(t,16,t.bl_tree),it(t,o-3,2)):o<=10?(nt(t,17,t.bl_tree),it(t,o-3,3)):(nt(t,18,t.bl_tree),it(t,o-11,7));o=0,r=s,0===a?(l=138,d=3):s===a?(l=6,d=3):(l=7,d=4)}};let ft=!1;const mt=(t,e,i,n)=>{it(t,0+(n?1:0),3),((t,e,i,n)=>{ot(t),et(t,i),et(t,~i),t.pending_buf.set(t.window.subarray(e,e+i),t.pending),t.pending+=i})(t,e,i)};var gt={_tr_init:t=>{ft||((()=>{let t,e,i,n,s;const r=new Array(16);for(i=0,n=0;n<28;n++)for(G[n]=i,t=0;t<1<<U[n];t++)Y[i++]=n;for(Y[i-1]=n,s=0,n=0;n<16;n++)for(K[n]=s,t=0;t<1<<F[n];t++)W[s++]=n;for(s>>=7;n<30;n++)for(K[n]=s<<7,t=0;t<1<<F[n]-7;t++)W[256+s++]=n;for(e=0;e<=15;e++)r[e]=0;for(t=0;t<=143;)Z[2*t+1]=8,t++,r[8]++;for(;t<=255;)Z[2*t+1]=9,t++,r[9]++;for(;t<=279;)Z[2*t+1]=7,t++,r[7]++;for(;t<=287;)Z[2*t+1]=8,t++,r[8]++;for(rt(Z,287,r),t=0;t<30;t++)V[2*t+1]=5,V[2*t]=st(t,5);J=new q(Z,U,257,286,15),X=new q(V,F,0,30,15),Q=new q(new Array(0),j,0,19,7)})(),ft=!0),t.l_desc=new $(t.dyn_ltree,J),t.d_desc=new $(t.dyn_dtree,X),t.bl_desc=new $(t.bl_tree,Q),t.bi_buf=0,t.bi_valid=0,at(t)},_tr_stored_block:mt,_tr_flush_block:(t,e,i,n)=>{let s,r,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),ht(t,t.l_desc),ht(t,t.d_desc),a=(t=>{let e;for(ut(t,t.dyn_ltree,t.l_desc.max_code),ut(t,t.dyn_dtree,t.d_desc.max_code),ht(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*H[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),s=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=s&&(s=r)):s=r=i+5,i+4<=s&&-1!==e?mt(t,e,i,n):4===t.strategy||r===s?(it(t,2+(n?1:0),3),ct(t,Z,V)):(it(t,4+(n?1:0),3),((t,e,i,n)=>{let s;for(it(t,e-257,5),it(t,i-1,5),it(t,n-4,4),s=0;s<n;s++)it(t,t.bl_tree[2*H[s]+1],3);pt(t,t.dyn_ltree,e-1),pt(t,t.dyn_dtree,i-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),ct(t,t.dyn_ltree,t.dyn_dtree)),at(t),n&&ot(t)},_tr_tally:(t,e,i)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(Y[i]+256+1)]++,t.dyn_dtree[2*tt(e)]++),t.last_lit===t.lit_bufsize-1),_tr_align:t=>{it(t,2,3),nt(t,256,Z),(t=>{16===t.bi_valid?(et(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},yt=(t,e,i,n)=>{let s=65535&t|0,r=t>>>16&65535|0,a=0;for(;0!==i;){a=i>2e3?2e3:i,i-=a;do{s=s+e[n++]|0,r=r+s|0}while(--a);s%=65521,r%=65521}return s|r<<16|0};const bt=new Uint32Array((()=>{let t,e=[];for(var i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e})());var wt=(t,e,i,n)=>{const s=bt,r=n+i;t^=-1;for(let i=n;i<r;i++)t=t>>>8^s[255&(t^e[i])];return-1^t},vt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},_t={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:xt,_tr_stored_block:kt,_tr_flush_block:Et,_tr_tally:Tt,_tr_align:St}=gt,{Z_NO_FLUSH:At,Z_PARTIAL_FLUSH:Ot,Z_FULL_FLUSH:Dt,Z_FINISH:Rt,Z_BLOCK:It,Z_OK:Lt,Z_STREAM_END:Ct,Z_STREAM_ERROR:Pt,Z_DATA_ERROR:Nt,Z_BUF_ERROR:Mt,Z_DEFAULT_COMPRESSION:zt,Z_FILTERED:Bt,Z_HUFFMAN_ONLY:Ut,Z_RLE:Ft,Z_FIXED:jt,Z_DEFAULT_STRATEGY:Ht,Z_UNKNOWN:Zt,Z_DEFLATED:Vt}=_t,Wt=(t,e)=>(t.msg=vt[e],e),Yt=t=>(t<<1)-(t>4?9:0),Gt=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let Kt=(t,e,i)=>(e<<t.hash_shift^i)&t.hash_mask;const qt=t=>{const e=t.state;let i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+i),t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))},Jt=(t,e)=>{Et(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,qt(t.strm)},Xt=(t,e)=>{t.pending_buf[t.pending++]=e},Qt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},$t=(t,e,i,n)=>{let s=t.avail_in;return s>n&&(s=n),0===s?0:(t.avail_in-=s,e.set(t.input.subarray(t.next_in,t.next_in+s),i),1===t.state.wrap?t.adler=yt(t.adler,e,s,i):2===t.state.wrap&&(t.adler=wt(t.adler,e,s,i)),t.next_in+=s,t.total_in+=s,s)},te=(t,e)=>{let i,n,s=t.max_chain_length,r=t.strstart,a=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,d=t.window,c=t.w_mask,h=t.prev,u=t.strstart+258;let p=d[r+a-1],f=d[r+a];t.prev_length>=t.good_match&&(s>>=2),o>t.lookahead&&(o=t.lookahead);do{if(i=e,d[i+a]===f&&d[i+a-1]===p&&d[i]===d[r]&&d[++i]===d[r+1]){r+=2,i++;do{}while(d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&d[++r]===d[++i]&&r<u);if(n=258-(u-r),r=u-258,n>a){if(t.match_start=e,a=n,n>=o)break;p=d[r+a-1],f=d[r+a]}}}while((e=h[e&c])>l&&0!=--s);return a<=t.lookahead?a:t.lookahead},ee=t=>{const e=t.w_size;let i,n,s,r,a;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,i=n;do{s=t.head[--i],t.head[i]=s>=e?s-e:0}while(--n);n=e,i=n;do{s=t.prev[--i],t.prev[i]=s>=e?s-e:0}while(--n);r+=e}if(0===t.strm.avail_in)break;if(n=$t(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=3)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=Kt(t,t.ins_h,t.window[a+1]);t.insert&&(t.ins_h=Kt(t,t.ins_h,t.window[a+3-1]),t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},ie=(t,e)=>{let i,n;for(;;){if(t.lookahead<262){if(ee(t),t.lookahead<262&&e===At)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=Kt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-262&&(t.match_length=te(t,i)),t.match_length>=3)if(n=Tt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Kt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Kt(t,t.ins_h,t.window[t.strstart+1]);else n=Tt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Jt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===Rt?(Jt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Jt(t,!1),0===t.strm.avail_out)?1:2},ne=(t,e)=>{let i,n,s;for(;;){if(t.lookahead<262){if(ee(t),t.lookahead<262&&e===At)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=Kt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-262&&(t.match_length=te(t,i),t.match_length<=5&&(t.strategy===Bt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,n=Tt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=Kt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Jt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=Tt(t,0,t.window[t.strstart-1]),n&&Jt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Tt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===Rt?(Jt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Jt(t,!1),0===t.strm.avail_out)?1:2};function se(t,e,i,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=s}const re=[new se(0,0,0,0,((t,e)=>{let i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ee(t),0===t.lookahead&&e===At)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Jt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(Jt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Rt?(Jt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&Jt(t,!1),1)})),new se(4,4,8,4,ie),new se(4,5,16,8,ie),new se(4,6,32,32,ie),new se(4,4,16,16,ne),new se(8,16,32,32,ne),new se(8,16,128,128,ne),new se(8,32,128,256,ne),new se(32,128,258,1024,ne),new se(32,258,258,4096,ne)];function ae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Vt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Gt(this.dyn_ltree),Gt(this.dyn_dtree),Gt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Gt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Gt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const oe=t=>{if(!t||!t.state)return Wt(t,Pt);t.total_in=t.total_out=0,t.data_type=Zt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=At,xt(e),Lt},le=t=>{const e=oe(t);var i;return e===Lt&&((i=t.state).window_size=2*i.w_size,Gt(i.head),i.max_lazy_match=re[i.level].max_lazy,i.good_match=re[i.level].good_length,i.nice_match=re[i.level].nice_length,i.max_chain_length=re[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0),e},de=(t,e,i,n,s,r)=>{if(!t)return Pt;let a=1;if(e===zt&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),s<1||s>9||i!==Vt||n<8||n>15||e<0||e>9||r<0||r>jt)return Wt(t,Pt);8===n&&(n=9);const o=new ae;return t.state=o,o.strm=t,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=r,o.method=i,le(t)};var ce=de,he=(t,e)=>t&&t.state?2!==t.state.wrap?Pt:(t.state.gzhead=e,Lt):Pt,ue=(t,e)=>{let i,n;if(!t||!t.state||e>It||e<0)return t?Wt(t,Pt):Pt;const s=t.state;if(!t.output||!t.input&&0!==t.avail_in||666===s.status&&e!==Rt)return Wt(t,0===t.avail_out?Mt:Pt);s.strm=t;const r=s.last_flush;if(s.last_flush=e,42===s.status)if(2===s.wrap)t.adler=0,Xt(s,31),Xt(s,139),Xt(s,8),s.gzhead?(Xt(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),Xt(s,255&s.gzhead.time),Xt(s,s.gzhead.time>>8&255),Xt(s,s.gzhead.time>>16&255),Xt(s,s.gzhead.time>>24&255),Xt(s,9===s.level?2:s.strategy>=Ut||s.level<2?4:0),Xt(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(Xt(s,255&s.gzhead.extra.length),Xt(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=wt(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(Xt(s,0),Xt(s,0),Xt(s,0),Xt(s,0),Xt(s,0),Xt(s,9===s.level?2:s.strategy>=Ut||s.level<2?4:0),Xt(s,3),s.status=113);else{let e=Vt+(s.w_bits-8<<4)<<8,i=-1;i=s.strategy>=Ut||s.level<2?0:s.level<6?1:6===s.level?2:3,e|=i<<6,0!==s.strstart&&(e|=32),e+=31-e%31,s.status=113,Qt(s,e),0!==s.strstart&&(Qt(s,t.adler>>>16),Qt(s,65535&t.adler)),t.adler=1}if(69===s.status)if(s.gzhead.extra){for(i=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>i&&(t.adler=wt(t.adler,s.pending_buf,s.pending-i,i)),qt(t),i=s.pending,s.pending!==s.pending_buf_size));)Xt(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>i&&(t.adler=wt(t.adler,s.pending_buf,s.pending-i,i)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){i=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>i&&(t.adler=wt(t.adler,s.pending_buf,s.pending-i,i)),qt(t),i=s.pending,s.pending===s.pending_buf_size)){n=1;break}n=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,Xt(s,n)}while(0!==n);s.gzhead.hcrc&&s.pending>i&&(t.adler=wt(t.adler,s.pending_buf,s.pending-i,i)),0===n&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){i=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>i&&(t.adler=wt(t.adler,s.pending_buf,s.pending-i,i)),qt(t),i=s.pending,s.pending===s.pending_buf_size)){n=1;break}n=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,Xt(s,n)}while(0!==n);s.gzhead.hcrc&&s.pending>i&&(t.adler=wt(t.adler,s.pending_buf,s.pending-i,i)),0===n&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&qt(t),s.pending+2<=s.pending_buf_size&&(Xt(s,255&t.adler),Xt(s,t.adler>>8&255),t.adler=0,s.status=113)):s.status=113),0!==s.pending){if(qt(t),0===t.avail_out)return s.last_flush=-1,Lt}else if(0===t.avail_in&&Yt(e)<=Yt(r)&&e!==Rt)return Wt(t,Mt);if(666===s.status&&0!==t.avail_in)return Wt(t,Mt);if(0!==t.avail_in||0!==s.lookahead||e!==At&&666!==s.status){let i=s.strategy===Ut?((t,e)=>{let i;for(;;){if(0===t.lookahead&&(ee(t),0===t.lookahead)){if(e===At)return 1;break}if(t.match_length=0,i=Tt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(Jt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Rt?(Jt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Jt(t,!1),0===t.strm.avail_out)?1:2})(s,e):s.strategy===Ft?((t,e)=>{let i,n,s,r;const a=t.window;for(;;){if(t.lookahead<=258){if(ee(t),t.lookahead<=258&&e===At)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(s=t.strstart-1,n=a[s],n===a[++s]&&n===a[++s]&&n===a[++s])){r=t.strstart+258;do{}while(n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&s<r);t.match_length=258-(r-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=Tt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=Tt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(Jt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Rt?(Jt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Jt(t,!1),0===t.strm.avail_out)?1:2})(s,e):re[s.level].func(s,e);if(3!==i&&4!==i||(s.status=666),1===i||3===i)return 0===t.avail_out&&(s.last_flush=-1),Lt;if(2===i&&(e===Ot?St(s):e!==It&&(kt(s,0,0,!1),e===Dt&&(Gt(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),qt(t),0===t.avail_out))return s.last_flush=-1,Lt}return e!==Rt?Lt:s.wrap<=0?Ct:(2===s.wrap?(Xt(s,255&t.adler),Xt(s,t.adler>>8&255),Xt(s,t.adler>>16&255),Xt(s,t.adler>>24&255),Xt(s,255&t.total_in),Xt(s,t.total_in>>8&255),Xt(s,t.total_in>>16&255),Xt(s,t.total_in>>24&255)):(Qt(s,t.adler>>>16),Qt(s,65535&t.adler)),qt(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?Lt:Ct)},pe=t=>{if(!t||!t.state)return Pt;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?Wt(t,Pt):(t.state=null,113===e?Wt(t,Nt):Lt)},fe=(t,e)=>{let i=e.length;if(!t||!t.state)return Pt;const n=t.state,s=n.wrap;if(2===s||1===s&&42!==n.status||n.lookahead)return Pt;if(1===s&&(t.adler=yt(t.adler,e,i,0)),n.wrap=0,i>=n.w_size){0===s&&(Gt(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(i-n.w_size,i),0),e=t,i=n.w_size}const r=t.avail_in,a=t.next_in,o=t.input;for(t.avail_in=i,t.next_in=0,t.input=e,ee(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=Kt(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,ee(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=a,t.input=o,t.avail_in=r,n.wrap=s,Lt};const me=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var ge=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const e in i)me(i,e)&&(t[e]=i[e])}}return t},ye=t=>{let e=0;for(let i=0,n=t.length;i<n;i++)e+=t[i].length;const i=new Uint8Array(e);for(let e=0,n=0,s=t.length;e<s;e++){let s=t[e];i.set(s,n),n+=s.length}return i};let be=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(B){be=!1}const we=new Uint8Array(256);for(let t=0;t<256;t++)we[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;we[254]=we[254]=1;var ve=t=>{let e,i,n,s,r,a=t.length,o=0;for(s=0;s<a;s++)i=t.charCodeAt(s),55296==(64512&i)&&s+1<a&&(n=t.charCodeAt(s+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),s++)),o+=i<128?1:i<2048?2:i<65536?3:4;for(e=new Uint8Array(o),r=0,s=0;r<o;s++)i=t.charCodeAt(s),55296==(64512&i)&&s+1<a&&(n=t.charCodeAt(s+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),s++)),i<128?e[r++]=i:i<2048?(e[r++]=192|i>>>6,e[r++]=128|63&i):i<65536?(e[r++]=224|i>>>12,e[r++]=128|i>>>6&63,e[r++]=128|63&i):(e[r++]=240|i>>>18,e[r++]=128|i>>>12&63,e[r++]=128|i>>>6&63,e[r++]=128|63&i);return e},_e=(t,e)=>{let i,n;const s=e||t.length,r=new Array(2*s);for(n=0,i=0;i<s;){let e=t[i++];if(e<128){r[n++]=e;continue}let a=we[e];if(a>4)r[n++]=65533,i+=a-1;else{for(e&=2===a?31:3===a?15:7;a>1&&i<s;)e=e<<6|63&t[i++],a--;a>1?r[n++]=65533:e<65536?r[n++]=e:(e-=65536,r[n++]=55296|e>>10&1023,r[n++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&be)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let i="";for(let n=0;n<e;n++)i+=String.fromCharCode(t[n]);return i})(r,n)},xe=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let i=e-1;for(;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?e:i+we[t[i]]>e?i:e},ke=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ee=Object.prototype.toString,{Z_NO_FLUSH:Te,Z_SYNC_FLUSH:Se,Z_FULL_FLUSH:Ae,Z_FINISH:Oe,Z_OK:De,Z_STREAM_END:Re,Z_DEFAULT_COMPRESSION:Ie,Z_DEFAULT_STRATEGY:Le,Z_DEFLATED:Ce}=_t;function Pe(t){this.options=ge({level:Ie,method:Ce,chunkSize:16384,windowBits:15,memLevel:8,strategy:Le},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ke,this.strm.avail_out=0;let i=ce(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==De)throw new Error(vt[i]);if(e.header&&he(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?ve(e.dictionary):"[object ArrayBuffer]"===Ee.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,i=fe(this.strm,t),i!==De)throw new Error(vt[i]);this._dict_set=!0}}function Ne(t,e){const i=new Pe(e);if(i.push(t,!0),i.err)throw i.msg||vt[i.err];return i.result}Pe.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize;let s,r;if(this.ended)return!1;for(r=e===~~e?e:!0===e?Oe:Te,i.input="string"==typeof t?ve(t):"[object ArrayBuffer]"===Ee.call(t)?new Uint8Array(t):t,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),(r===Se||r===Ae)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(s=ue(i,r),s===Re)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),s=pe(this.strm),this.onEnd(s),this.ended=!0,s===De;if(0!==i.avail_out){if(r>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},Pe.prototype.onData=function(t){this.chunks.push(t)},Pe.prototype.onEnd=function(t){t===De&&(this.result=ye(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Me={Deflate:Pe,deflate:Ne,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Ne(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Ne(t,e)},constants:_t},ze=function(t,e){let i,n,s,r,a,o,l,d,c,h,u,p,f,m,g,y,b,w,v,_,x,k,E,T;const S=t.state;i=t.next_in,E=t.input,n=i+(t.avail_in-5),s=t.next_out,T=t.output,r=s-(e-t.avail_out),a=s+(t.avail_out-257),o=S.dmax,l=S.wsize,d=S.whave,c=S.wnext,h=S.window,u=S.hold,p=S.bits,f=S.lencode,m=S.distcode,g=(1<<S.lenbits)-1,y=(1<<S.distbits)-1;t:do{p<15&&(u+=E[i++]<<p,p+=8,u+=E[i++]<<p,p+=8),b=f[u&g];e:for(;;){if(w=b>>>24,u>>>=w,p-=w,w=b>>>16&255,0===w)T[s++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=f[(65535&b)+(u&(1<<w)-1)];continue e}if(32&w){S.mode=12;break t}t.msg="invalid literal/length code",S.mode=30;break t}v=65535&b,w&=15,w&&(p<w&&(u+=E[i++]<<p,p+=8),v+=u&(1<<w)-1,u>>>=w,p-=w),p<15&&(u+=E[i++]<<p,p+=8,u+=E[i++]<<p,p+=8),b=m[u&y];i:for(;;){if(w=b>>>24,u>>>=w,p-=w,w=b>>>16&255,!(16&w)){if(0==(64&w)){b=m[(65535&b)+(u&(1<<w)-1)];continue i}t.msg="invalid distance code",S.mode=30;break t}if(_=65535&b,w&=15,p<w&&(u+=E[i++]<<p,p+=8,p<w&&(u+=E[i++]<<p,p+=8)),_+=u&(1<<w)-1,_>o){t.msg="invalid distance too far back",S.mode=30;break t}if(u>>>=w,p-=w,w=s-r,_>w){if(w=_-w,w>d&&S.sane){t.msg="invalid distance too far back",S.mode=30;break t}if(x=0,k=h,0===c){if(x+=l-w,w<v){v-=w;do{T[s++]=h[x++]}while(--w);x=s-_,k=T}}else if(c<w){if(x+=l+c-w,w-=c,w<v){v-=w;do{T[s++]=h[x++]}while(--w);if(x=0,c<v){w=c,v-=w;do{T[s++]=h[x++]}while(--w);x=s-_,k=T}}}else if(x+=c-w,w<v){v-=w;do{T[s++]=h[x++]}while(--w);x=s-_,k=T}for(;v>2;)T[s++]=k[x++],T[s++]=k[x++],T[s++]=k[x++],v-=3;v&&(T[s++]=k[x++],v>1&&(T[s++]=k[x++]))}else{x=s-_;do{T[s++]=T[x++],T[s++]=T[x++],T[s++]=T[x++],v-=3}while(v>2);v&&(T[s++]=T[x++],v>1&&(T[s++]=T[x++]))}break}}break}}while(i<n&&s<a);v=p>>3,i-=v,p-=v<<3,u&=(1<<p)-1,t.next_in=i,t.next_out=s,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=s<a?a-s+257:257-(s-a),S.hold=u,S.bits=p};const Be=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ue=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Fe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),je=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var He=(t,e,i,n,s,r,a,o)=>{const l=o.bits;let d,c,h,u,p,f,m=0,g=0,y=0,b=0,w=0,v=0,_=0,x=0,k=0,E=0,T=null,S=0;const A=new Uint16Array(16),O=new Uint16Array(16);let D,R,I,L=null,C=0;for(m=0;m<=15;m++)A[m]=0;for(g=0;g<n;g++)A[e[i+g]]++;for(w=l,b=15;b>=1&&0===A[b];b--);if(w>b&&(w=b),0===b)return s[r++]=20971520,s[r++]=20971520,o.bits=1,0;for(y=1;y<b&&0===A[y];y++);for(w<y&&(w=y),x=1,m=1;m<=15;m++)if(x<<=1,x-=A[m],x<0)return-1;if(x>0&&(0===t||1!==b))return-1;for(O[1]=0,m=1;m<15;m++)O[m+1]=O[m]+A[m];for(g=0;g<n;g++)0!==e[i+g]&&(a[O[e[i+g]]++]=g);if(0===t?(T=L=a,f=19):1===t?(T=Be,S-=257,L=Ue,C-=257,f=256):(T=Fe,L=je,f=-1),E=0,g=0,m=y,p=r,v=w,_=0,h=-1,k=1<<w,u=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){D=m-_,a[g]<f?(R=0,I=a[g]):a[g]>f?(R=L[C+a[g]],I=T[S+a[g]]):(R=96,I=0),d=1<<m-_,c=1<<v,y=c;do{c-=d,s[p+(E>>_)+c]=D<<24|R<<16|I|0}while(0!==c);for(d=1<<m-1;E&d;)d>>=1;if(0!==d?(E&=d-1,E+=d):E=0,g++,0==--A[m]){if(m===b)break;m=e[i+a[g]]}if(m>w&&(E&u)!==h){for(0===_&&(_=w),p+=y,v=m-_,x=1<<v;v+_<b&&(x-=A[v+_],!(x<=0));)v++,x<<=1;if(k+=1<<v,1===t&&k>852||2===t&&k>592)return 1;h=E&u,s[h]=w<<24|v<<16|p-r|0}}return 0!==E&&(s[p+E]=m-_<<24|64<<16|0),o.bits=w,0};const{Z_FINISH:Ze,Z_BLOCK:Ve,Z_TREES:We,Z_OK:Ye,Z_STREAM_END:Ge,Z_NEED_DICT:Ke,Z_STREAM_ERROR:qe,Z_DATA_ERROR:Je,Z_MEM_ERROR:Xe,Z_BUF_ERROR:Qe,Z_DEFLATED:$e}=_t,ti=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function ei(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ii=t=>{if(!t||!t.state)return qe;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Ye},ni=t=>{if(!t||!t.state)return qe;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ii(t)},si=(t,e)=>{let i;if(!t||!t.state)return qe;const n=t.state;return e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?qe:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,ni(t))},ri=(t,e)=>{if(!t)return qe;const i=new ei;t.state=i,i.window=null;const n=si(t,e);return n!==Ye&&(t.state=null),n};let ai,oi,li=!0;const di=t=>{if(li){ai=new Int32Array(512),oi=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(He(1,t.lens,0,288,ai,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;He(2,t.lens,0,32,oi,0,t.work,{bits:5}),li=!1}t.lencode=ai,t.lenbits=9,t.distcode=oi,t.distbits=5},ci=(t,e,i,n)=>{let s;const r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(e.subarray(i-r.wsize,i),0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),r.window.set(e.subarray(i-n,i-n+s),r.wnext),(n-=s)?(r.window.set(e.subarray(i-n,i),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0};var hi=ni,ui=ri,pi=(t,e)=>{let i,n,s,r,a,o,l,d,c,h,u,p,f,m,g,y,b,w,v,_,x,k,E=0;const T=new Uint8Array(4);let S,A;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return qe;i=t.state,12===i.mode&&(i.mode=13),a=t.next_out,s=t.output,l=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,d=i.hold,c=i.bits,h=o,u=l,k=Ye;t:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;c<16;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}if(2&i.wrap&&35615===d){i.check=0,T[0]=255&d,T[1]=d>>>8&255,i.check=wt(i.check,T,2,0),d=0,c=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&d)<<8)+(d>>8))%31){t.msg="incorrect header check",i.mode=30;break}if((15&d)!==$e){t.msg="unknown compression method",i.mode=30;break}if(d>>>=4,c-=4,x=8+(15&d),0===i.wbits)i.wbits=x;else if(x>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<i.wbits,t.adler=i.check=1,i.mode=512&d?10:12,d=0,c=0;break;case 2:for(;c<16;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}if(i.flags=d,(255&i.flags)!==$e){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=d>>8&1),512&i.flags&&(T[0]=255&d,T[1]=d>>>8&255,i.check=wt(i.check,T,2,0)),d=0,c=0,i.mode=3;case 3:for(;c<32;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}i.head&&(i.head.time=d),512&i.flags&&(T[0]=255&d,T[1]=d>>>8&255,T[2]=d>>>16&255,T[3]=d>>>24&255,i.check=wt(i.check,T,4,0)),d=0,c=0,i.mode=4;case 4:for(;c<16;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}i.head&&(i.head.xflags=255&d,i.head.os=d>>8),512&i.flags&&(T[0]=255&d,T[1]=d>>>8&255,i.check=wt(i.check,T,2,0)),d=0,c=0,i.mode=5;case 5:if(1024&i.flags){for(;c<16;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}i.length=d,i.head&&(i.head.extra_len=d),512&i.flags&&(T[0]=255&d,T[1]=d>>>8&255,i.check=wt(i.check,T,2,0)),d=0,c=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(p=i.length,p>o&&(p=o),p&&(i.head&&(x=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(r,r+p),x)),512&i.flags&&(i.check=wt(i.check,n,p,r)),o-=p,r+=p,i.length-=p),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===o)break t;p=0;do{x=n[r+p++],i.head&&x&&i.length<65536&&(i.head.name+=String.fromCharCode(x))}while(x&&p<o);if(512&i.flags&&(i.check=wt(i.check,n,p,r)),o-=p,r+=p,x)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===o)break t;p=0;do{x=n[r+p++],i.head&&x&&i.length<65536&&(i.head.comment+=String.fromCharCode(x))}while(x&&p<o);if(512&i.flags&&(i.check=wt(i.check,n,p,r)),o-=p,r+=p,x)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;c<16;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}if(d!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}d=0,c=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;c<32;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}t.adler=i.check=ti(d),d=0,c=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=a,t.avail_out=l,t.next_in=r,t.avail_in=o,i.hold=d,i.bits=c,Ke;t.adler=i.check=1,i.mode=12;case 12:if(e===Ve||e===We)break t;case 13:if(i.last){d>>>=7&c,c-=7&c,i.mode=27;break}for(;c<3;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}switch(i.last=1&d,d>>>=1,c-=1,3&d){case 0:i.mode=14;break;case 1:if(di(i),i.mode=20,e===We){d>>>=2,c-=2;break t}break;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}d>>>=2,c-=2;break;case 14:for(d>>>=7&c,c-=7&c;c<32;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}if((65535&d)!=(d>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&d,d=0,c=0,i.mode=15,e===We)break t;case 15:i.mode=16;case 16:if(p=i.length,p){if(p>o&&(p=o),p>l&&(p=l),0===p)break t;s.set(n.subarray(r,r+p),a),o-=p,r+=p,l-=p,a+=p,i.length-=p;break}i.mode=12;break;case 17:for(;c<14;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}if(i.nlen=257+(31&d),d>>>=5,c-=5,i.ndist=1+(31&d),d>>>=5,c-=5,i.ncode=4+(15&d),d>>>=4,c-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;c<3;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}i.lens[O[i.have++]]=7&d,d>>>=3,c-=3}for(;i.have<19;)i.lens[O[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,S={bits:i.lenbits},k=He(0,i.lens,0,19,i.lencode,0,i.work,S),i.lenbits=S.bits,k){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;E=i.lencode[d&(1<<i.lenbits)-1],g=E>>>24,y=E>>>16&255,b=65535&E,!(g<=c);){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}if(b<16)d>>>=g,c-=g,i.lens[i.have++]=b;else{if(16===b){for(A=g+2;c<A;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}if(d>>>=g,c-=g,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}x=i.lens[i.have-1],p=3+(3&d),d>>>=2,c-=2}else if(17===b){for(A=g+3;c<A;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}d>>>=g,c-=g,x=0,p=3+(7&d),d>>>=3,c-=3}else{for(A=g+7;c<A;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}d>>>=g,c-=g,x=0,p=11+(127&d),d>>>=7,c-=7}if(i.have+p>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;p--;)i.lens[i.have++]=x}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,S={bits:i.lenbits},k=He(1,i.lens,0,i.nlen,i.lencode,0,i.work,S),i.lenbits=S.bits,k){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,S={bits:i.distbits},k=He(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,S),i.distbits=S.bits,k){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,e===We)break t;case 20:i.mode=21;case 21:if(o>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=r,t.avail_in=o,i.hold=d,i.bits=c,ze(t,u),a=t.next_out,s=t.output,l=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,d=i.hold,c=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;E=i.lencode[d&(1<<i.lenbits)-1],g=E>>>24,y=E>>>16&255,b=65535&E,!(g<=c);){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}if(y&&0==(240&y)){for(w=g,v=y,_=b;E=i.lencode[_+((d&(1<<w+v)-1)>>w)],g=E>>>24,y=E>>>16&255,b=65535&E,!(w+g<=c);){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}d>>>=w,c-=w,i.back+=w}if(d>>>=g,c-=g,i.back+=g,i.length=b,0===y){i.mode=26;break}if(32&y){i.back=-1,i.mode=12;break}if(64&y){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&y,i.mode=22;case 22:if(i.extra){for(A=i.extra;c<A;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}i.length+=d&(1<<i.extra)-1,d>>>=i.extra,c-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;E=i.distcode[d&(1<<i.distbits)-1],g=E>>>24,y=E>>>16&255,b=65535&E,!(g<=c);){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}if(0==(240&y)){for(w=g,v=y,_=b;E=i.distcode[_+((d&(1<<w+v)-1)>>w)],g=E>>>24,y=E>>>16&255,b=65535&E,!(w+g<=c);){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}d>>>=w,c-=w,i.back+=w}if(d>>>=g,c-=g,i.back+=g,64&y){t.msg="invalid distance code",i.mode=30;break}i.offset=b,i.extra=15&y,i.mode=24;case 24:if(i.extra){for(A=i.extra;c<A;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}i.offset+=d&(1<<i.extra)-1,d>>>=i.extra,c-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===l)break t;if(p=u-l,i.offset>p){if(p=i.offset-p,p>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}p>i.wnext?(p-=i.wnext,f=i.wsize-p):f=i.wnext-p,p>i.length&&(p=i.length),m=i.window}else m=s,f=a-i.offset,p=i.length;p>l&&(p=l),l-=p,i.length-=p;do{s[a++]=m[f++]}while(--p);0===i.length&&(i.mode=21);break;case 26:if(0===l)break t;s[a++]=i.length,l--,i.mode=21;break;case 27:if(i.wrap){for(;c<32;){if(0===o)break t;o--,d|=n[r++]<<c,c+=8}if(u-=l,t.total_out+=u,i.total+=u,u&&(t.adler=i.check=i.flags?wt(i.check,s,u,a-u):yt(i.check,s,u,a-u)),u=l,(i.flags?d:ti(d))!==i.check){t.msg="incorrect data check",i.mode=30;break}d=0,c=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;c<32;){if(0===o)break t;o--,d+=n[r++]<<c,c+=8}if(d!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}d=0,c=0}i.mode=29;case 29:k=Ge;break t;case 30:k=Je;break t;case 31:return Xe;case 32:default:return qe}return t.next_out=a,t.avail_out=l,t.next_in=r,t.avail_in=o,i.hold=d,i.bits=c,(i.wsize||u!==t.avail_out&&i.mode<30&&(i.mode<27||e!==Ze))&&ci(t,t.output,t.next_out,u-t.avail_out),h-=t.avail_in,u-=t.avail_out,t.total_in+=h,t.total_out+=u,i.total+=u,i.wrap&&u&&(t.adler=i.check=i.flags?wt(i.check,s,u,t.next_out-u):yt(i.check,s,u,t.next_out-u)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0===h&&0===u||e===Ze)&&k===Ye&&(k=Qe),k},fi=t=>{if(!t||!t.state)return qe;let e=t.state;return e.window&&(e.window=null),t.state=null,Ye},mi=(t,e)=>{if(!t||!t.state)return qe;const i=t.state;return 0==(2&i.wrap)?qe:(i.head=e,e.done=!1,Ye)},gi=(t,e)=>{const i=e.length;let n,s,r;return t&&t.state?(n=t.state,0!==n.wrap&&11!==n.mode?qe:11===n.mode&&(s=1,s=yt(s,e,i,0),s!==n.check)?Je:(r=ci(t,e,i,i),r?(n.mode=31,Xe):(n.havedict=1,Ye))):qe},yi=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const bi=Object.prototype.toString,{Z_NO_FLUSH:wi,Z_FINISH:vi,Z_OK:_i,Z_STREAM_END:xi,Z_NEED_DICT:ki,Z_STREAM_ERROR:Ei,Z_DATA_ERROR:Ti,Z_MEM_ERROR:Si}=_t;function Ai(t){this.options=ge({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ke,this.strm.avail_out=0;let i=ui(this.strm,e.windowBits);if(i!==_i)throw new Error(vt[i]);if(this.header=new yi,mi(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=ve(e.dictionary):"[object ArrayBuffer]"===bi.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=gi(this.strm,e.dictionary),i!==_i)))throw new Error(vt[i])}function Oi(t,e){const i=new Ai(e);if(i.push(t),i.err)throw i.msg||vt[i.err];return i.result}Ai.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let r,a,o;if(this.ended)return!1;for(a=e===~~e?e:!0===e?vi:wi,i.input="[object ArrayBuffer]"===bi.call(t)?new Uint8Array(t):t,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),r=pi(i,a),r===ki&&s&&(r=gi(i,s),r===_i?r=pi(i,a):r===Ti&&(r=ki));i.avail_in>0&&r===xi&&i.state.wrap>0&&0!==t[i.next_in];)hi(i),r=pi(i,a);switch(r){case Ei:case Ti:case ki:case Si:return this.onEnd(r),this.ended=!0,!1}if(o=i.avail_out,i.next_out&&(0===i.avail_out||r===xi))if("string"===this.options.to){let t=xe(i.output,i.next_out),e=i.next_out-t,s=_e(i.output,t);i.next_out=e,i.avail_out=n-e,e&&i.output.set(i.output.subarray(t,t+e),0),this.onData(s)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==_i||0!==o){if(r===xi)return r=fi(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},Ai.prototype.onData=function(t){this.chunks.push(t)},Ai.prototype.onEnd=function(t){t===_i&&(this.result="string"===this.options.to?this.chunks.join(""):ye(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Di={Inflate:Ai,inflate:Oi,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Oi(t,e)},ungzip:Oi,constants:_t};const{Deflate:Ri,deflate:Ii,deflateRaw:Li,gzip:Ci}=Me,{Inflate:Pi,inflate:Ni,inflateRaw:Mi,ungzip:zi}=Di;var Bi={Deflate:Ri,deflate:Ii,deflateRaw:Li,gzip:Ci,Inflate:Pi,inflate:Ni,inflateRaw:Mi,ungzip:zi,constants:_t};class Ui{constructor(t){this.defaultOptions={ai:"$",si:","},this.keysMap=new Map,this.indexMap=new Map;let e=0,i=1;this.options=this.defaultOptions,"Object"===Object.prototype.toString.call(t[0]).slice(8,14)&&(this.options={...this.defaultOptions,...t[0]},e++,i++),this.result=this.convert2Json(t[e],t[i])}convert2Json(t,e){if(!(t&&Array.isArray(t)&&e&&Array.isArray(e)))throw new Error("Params is not valid");const i=t.slice();for(t.forEach(((t,e)=>{i[e].i=e;const n=t.join(this.options.si);this.keysMap.set(n,e),this.indexMap.set(e,n)}));i.length;){const t=i.shift(),e=t.i,n=t.join(this.options.si);for(const[e,i]of t.entries())if("number"==typeof i){const n=this.indexMap.get(i);t[e]=n.split(this.options.si)}const s=t.flat().join(this.options.si);n!==s&&(this.keysMap.delete(n),this.keysMap.set(s,e),this.indexMap.set(e,s))}return this.convertObj(e)}convertObj(t){if(Array.isArray(t)){if(t[0]===this.options.ai){const e=t.slice(1);return this.convertArray(e)}if(!t.length)return{};const e=this.indexMap.get(t[0]),i={},n=e.split(this.options.si),s=t.slice(1);return n.forEach(((t,e)=>{const n=s[e];i[t]=Array.isArray(n)?this.convertObj(n):n})),i}return t}convertArray(t){const e=[];return t.forEach((t=>{e.push(this.convertObj(t))})),e}}class Fi{constructor(t,e){if(this.defaultOptions={arrayIdentifier:"$",separatorIdentifier:","},this.keys=[],this.values=[],this.keyMap=new Map,this.indexMap=new Map,this.getLastKeyInMap=()=>{const t=this.keyMap;return Array.from(t)[t.size-1][0]},"object"!=typeof t||null===t)throw new Error("The params json is not a object");const{arrayIdentifier:i,separatorIdentifier:n}=e||{};this.json=t,this.arrayIdentifier=i||this.defaultOptions.arrayIdentifier,this.separatorIdentifier=n||this.defaultOptions.separatorIdentifier,this.result=this.getResult()}getResult(){const t=this.json;this.values=Array.isArray(t)?[...this.deepConvertArray(t)]:this.deepConvertObj(t);const e={ai:this.arrayIdentifier===this.defaultOptions.arrayIdentifier?void 0:this.arrayIdentifier,si:this.separatorIdentifier===this.defaultOptions.separatorIdentifier?void 0:this.separatorIdentifier};return Object.keys(e).forEach((t=>{e[t]||delete e[t]})),Object.keys(e).length?[e,this.keys,this.values]:[this.keys,this.values]}deepConvertArray(t,e=!0){const i=[e?this.arrayIdentifier:""].filter(Boolean);return t.forEach((t=>{const e=typeof t;Array.isArray(t)?i.push(this.deepConvertArray(t)):i.push(null!==t&&"object"===e?this.deepConvertObj(t):t)})),i}deepConvertObj(t){const e=this.separatorIdentifier,i=[],n=Object.getOwnPropertyNames(t).sort(),s=n.join(e),r="<$index>";if(""===s&&!n.length)return i;let a=n.map((e=>t[e]));if(this.keys.length){const o=this.getIndexByKey(s);if(void 0!==o)return a=s.split(e).map((e=>t[e])),i.push(o,...this.deepConvertArray(a,!1)),i;const l=this.getLastKeyInMap();for(const[t,a]of this.keyMap){const o=s.split(e).length<t.split(e).length,d=o?t:s,c=o?s:t,h=this.keys.length,u=t=>t.split(e).map((t=>"<$"+t+">")).join(e),p=u(d),f=u(c);if(~p.indexOf(f)){const t=p.replace(f,r),n=i=>t.split(e).map((t=>t===r?i:t.substring(2,t.length-1)));if(o){const t=this.saveKey(c),s=n(t),r=this.getIndexByKey(d);this.keys.push(c.split(e)),this.keys[r]=s,i.unshift(t)}else{const t=n(a);this.saveKey(d),this.keys.push(t),i.unshift(h)}break}if(l===t){this.saveKey(s),this.keys.push([...n]),i.unshift(h);break}}}else i.unshift(this.saveKey(s)),this.keys.push(n);return i.push(...this.deepConvertArray(a,!1)),i}saveKey(t,e=this.keys.length){return this.keyMap.set(t,e),this.indexMap.set(e,t),e}getIndexByKey(t){return this.keyMap.get(t)}}const ji={startTime:0,endTime:0,duration:0,packsInfo:[]};var Hi;!function(t){t.RESET="RESET",t.PROGRESS="PROGRESS"}(Hi||(Hi={}));const Zi={speed:0,options:{}};var Vi;function Wi(t){const e=[],i=[];return t.forEach(((s,r)=>{r&&s.type===n.HEAD&&(e.push(i.slice()),i.length=0),i.push(s),t.length-1===r&&e.push(i)})),e}!function(t){t.RESET="RESET",t.SPEED="SPEED",t.OPTIONS="OPTIONS"}(Vi||(Vi={}));const Yi={records:[],packs:[],currentData:{}};var Gi;!function(t){t.RESET="RESET",t.UPDATE_DATA="UPDATE_DATA",t.APPEND_RECORDS="APPEND_RECORDS"}(Gi||(Gi={}));const Ki=function(t){let e=t({});const i=[];function n(n){e=t(e,n),i.forEach((t=>{t(e)}))}return{unsubscribe:function(){i.length=0,n({type:"RESET",data:{}})},subscribe:function(t){i.push(t)},dispatch:n,getState:function(){return e}}}(function(t){const e=Object.keys(t);return function(i,n){const s={};for(let r=0;r<e.length;r++){const a=e[r],o=(0,t[a])(i[a],n);s[a]=o}return s}}({player:function(t,e){if(t||(t=Zi),!e)return t;const{type:i,data:n}=e;switch(i){case Vi.OPTIONS:return Object.assign(Object.assign({},t),{options:n.options});case Vi.SPEED:return Object.assign(Object.assign({},t),{speed:n.speed});case Vi.RESET:return Object.assign({},Zi);default:return t}},progress:function(t,e){if(t||(t=ji),!e)return t;const{type:i,data:n}=e;switch(i){case Hi.PROGRESS:return Object.assign(Object.assign({},t),n);case Hi.RESET:return Object.assign({},ji);default:return t}},replayData:function(t,e){if(t||(t=Yi),!e)return t;const{type:i,data:n}=e;switch(i){case Gi.APPEND_RECORDS:const e=t.records;e.push(...n.records);const i=Wi(e);return t.packs=i,t;case Gi.UPDATE_DATA:return n.currentData&&n.currentData&&(window.G_REPLAY_DATA=n.currentData),Object.assign(Object.assign({},t),n);case Gi.RESET:return Object.assign({},Yi);default:return t}}}));var qi=$i,Ji=$i,Xi=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,Qi=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function $i(t){t||(t={});var e=t.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var i=t.tablet?Qi.test(e):Xi.test(e);return!i&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(i=!0),i}qi.isMobile=$i,qi.default=Ji;const tn=["VIDEO","IFRAME"];function en(t,e,i){if(t.nodeType===Node.ELEMENT_NODE)if("style"!==e)if("xlink:href"!==e||t.constructor.name!==SVGUseElement.name){if(!("src"===e&&~tn.indexOf(t.tagName)||i&&"string"==typeof i&&/\.js$/.test(i)||/^\d+/.test(e)||/^on\w+$/.test(e))){if(null===i)return t.removeAttribute(e);if(i=String(i),"href"===e&&(i=v(String(i),t)),"background"!==e&&"src"!==e||i.startsWith("data:")||(i=v(String(i),t)),"srcset"===e){const e=i.split(",");i=e.map((e=>{const[i,n]=e.trim().split(" ");return i&&n?`${v(i,t)} ${n}`:i?v(i,t):""})).join(", "),i=decodeURIComponent(i)}i.startsWith("/")&&(i=v(i,t));try{t.setAttribute(e,i)}catch(t){o(t)}}}else t.setAttributeNS("http://www.w3.org/1999/xlink",e,i);else if("string"==typeof i)t.style.cssText=w(i);else if(null!==i&&"object"==typeof i)for(const[e,n]of Object.entries(i))"-"===e[0]?t.style.setProperty(e,n):t.style[e]=n}function nn(t,e){if(null==t)return null;const i=t;if(t.type===Node.COMMENT_NODE)return function(t){const{value:e,id:i}=t,n=document.createComment(e);return C.updateNode(i,n),n}(i);if(t.type===Node.TEXT_NODE){if(e&&"style"===e.tag){i.value=w(i.value,null==e?void 0:e.attrs["css-url"])}return function(t){const{value:e,id:i}=t,n=document.createTextNode(e);return C.updateNode(i,n),n}(i)}const n=t,s=function(t){const{id:e,extra:i}=t,{isSVG:n}=i;let s;const r=(a=t.tag,{script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointLight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"}[a]||a);var a;s=n?document.createElementNS("http://www.w3.org/2000/svg",r):document.createElement(r);return function(t,e){const i=function(t){return Object.assign({},t.attrs)}(t);for(const[t,n]of Object.entries(i))en(e,t,n);"a"===t.tag&&e.setAttribute("target","_blank")}(t,s),function(t,e){const{props:i}=t.extra;if(i)for(const[t,n]of Object.entries(i))if("scroll"===t){const{left:t,top:i}=n;setTimeout((()=>{e.scrollTop=i,e.scrollLeft=t}),1e3)}else e[t]=n}(t,s),C.updateNode(e,s),s}(n);return(n.children&&n.children.length||s.childNodes&&s.childNodes.length)&&function(t,e){const i=[];t.children.slice().forEach((n=>{let s=i.pop();s=nn(n,t),s&&(function(t){return!!t&&t.nodeType===Node.COMMENT_NODE&&"hidden"===t.textContent}(e.lastChild)&&en(s,"style","visibility: hidden"),e.appendChild(s))}))}(n,s),s}function sn(t){const e={head:{},snapshot:{},records:[],audio:{src:"",pcmStrList:[],wavStrList:[],subtitles:[],opts:{}},videos:[]},i=new Map;if(t.forEach(((s,r)=>{const a=t[r+1];if(s.type===n.HEAD)a&&!a.data.frameId&&(e.head=s);else if(s.type===n.SNAPSHOT)s.data.frameId?e.records.push(s):e&&(e.snapshot=s);else{switch(s.type){case n.AUDIO:const{data:t}=s;if(t.src){const i=t;e.audio.src=i.src,e.audio.subtitles=i.subtitles}else!function(t){return"pcm"===t.type&&"base64"===t.encode}(t)?!function(t){return"wav"===t.type&&"base64"===t.encode}(t)?e.audio.opts=t.data:e.audio.wavStrList.push(...t.data):e.audio.pcmStrList.push(...t.data);e.records.push(s);break;case n.VIDEO:const{data:r,time:a}=s,{id:o,dataStr:l}=r;if(!l)break;const d=i.get(o);if(d)d.bufferStrList.push(l),d.endTime=a;else{i.set(o,{id:o,startTime:a,endTime:a,bufferStrList:[l]})}e.records.push(s)}e&&e.records.push(s)}})),i.size){const t=Array.from(i.entries()).map((([,t])=>{const{bufferStrList:e,startTime:i,endTime:n,id:s}=t,r=e.map((t=>{const e=S(t);return new Blob([e],{type:"video/webm;codecs=vp9"})})),a=new Blob(r,{type:"video/webm"});return{id:s,src:window.URL.createObjectURL(a),startTime:i,endTime:n}}));e.videos.push(...t)}return e}function rn(){const t=window.G_REPLAY_STR_RECORDS;if(!t)return null;return function(t){return function(t){const{result:e}=new Ui(t);return e}(JSON.parse(Bi.ungzip(t,{to:"string"})))}(function(t){const e=t.split(""),i=new Uint8Array(e.length);for(let t=0;t<e.length;t++){const n=e[t].charCodeAt(0);i[t]=n>=256?n-256:n}return i}(t))}function an(){return i(this,void 0,void 0,(function*(){const t=yield((t="indexPage")=>I||(I=new R(`zyb_db__${t}`,2,"zyb_pad_table")))().readAll();return t&&t.length?t:null}))}function on(t){return[...(new DOMParser).parseFromString(t,"text/html").body.children]}function ln(t,e){t.open();const i=e.doctype;t.write(`<!DOCTYPE ${i.name} ${i.publicId?'PUBLIC "'+i.publicId+'"':""} ${i.systemId?'"'+i.systemId+'"':""}><html><head></head><body></body></html>`),t.close()}function dn(t,e){const i=nn(e.vNode);if(i){const n=i.querySelector("head");if(n){const t=on("<div>\n                    <style>\n                        /**\n * Copyright (c) oct16.\n * https://github.com/oct16\n * \n * This source code is licensed under the GPL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\ntextarea,\nbutton,\ndatalist,\nfieldset,\nform,\ninput,\nlabel,\nlegend,\nmeter,\noptgroup,\noption,\noutput,\nprogress,\nselect,\niframe {\n  pointer-events: none;\n}\nhtml,\nbody {\n  scrollbar-width: none;\n  /* firefox */\n}\nhtml::-webkit-scrollbar,\nbody::-webkit-scrollbar {\n  display: none;\n}\n\n                    </style>\n                </div>")[0].firstElementChild;n.appendChild(t)}const s=t.documentElement;i.scrollLeft=e.scrollLeft,i.scrollTop=e.scrollTop,t.replaceChild(i,s)}}const cn=(hn=Ki,t=>{let e;return i=>{hn.subscribe((()=>{const n=t(hn.getState());((t,e)=>{if(t===e)return!0;if("object"!=typeof t||null==t||"object"!=typeof e||null==e)return!1;const i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(let n=0;n<i.length;n++){if(!e.hasOwnProperty(i[n]))return!1;if(t[i[n]]!==e[i[n]])return!1}return!0})(n,e)||i(e=n)}))}});var hn;const un=t=>function(e,i,n){const s=n.value;n.value=function(e){cn(t)((t=>{s.call(this,t),e&&e(t)}))}};class pn{constructor(t,e=[]){this.ratio=2,this.target=t,this.points=e;const i=this.target.offsetHeight*this.ratio;this.targetWidth=t.width=this.target.offsetWidth*this.ratio,this.targetHeight=t.height=i,this.context=t.getContext("2d")}radiusRect(t,e,i,n,s,r="#fff"){const a=Math.min(i,n);s>a/2&&(s=a/2),this.context.fillStyle=r,this.context.strokeStyle=r,this.context.beginPath(),this.context.moveTo(t+s,e),this.context.arcTo(t+i,e,t+i,e+n,s),this.context.arcTo(t+i,e+n,t,e+n,s),this.context.arcTo(t,e+n,t,e,s),this.context.arcTo(t,e,t+i,e,s),this.context.closePath(),this.context.stroke(),this.context.fill()}}class fn extends pn{constructor(t,e){super(t,e),this.draw()}draw(){const t=this.points,e=t.length,i=this.targetWidth/(2*e),n=this.targetHeight,s=Math.max.apply(null,t.map((t=>t.step)));for(let r=0;r<e;r++){const e=t[r];if(!e.step)continue;const a=2*r*i,o=2,l=i,d=.9*n,c=.16,h=Math.sin(e.step/s*(Math.PI/2))*(1-c)+c;this.radiusRect(a,o,l,e.snapshot?d:h*d,2,e.snapshot?"#6AD1C7":"#fff")}}}class mn extends pn{constructor(t){super(t),this.draw()}draw(){if(!this.targetWidth)return;this.radiusRect(4,8,this.targetWidth-8,8,4)}}function gn(t,e,i){return function(n){customElements.get(t)||customElements.define(t,class extends HTMLElement{constructor(){var t,s;super();const r=on(e)[0];n.prototype.target=r;const a=r.getElementsByTagName("slot")[0];if(a&&(null===(t=this.children)||void 0===t?void 0:t.length)>0){const t=a.parentElement;[...this.children].forEach((e=>null==t?void 0:t.insertBefore(e,null))),null==t||t.removeChild(a)}(null==i?void 0:i.isShadow)?this.attachShadow({mode:"open"}).append(r):null===(s=this.parentElement)||void 0===s||s.replaceChild(r,this),n.prototype.parent=r.parentElement}})}}const yn=function(t,...e){let i="";return t.forEach(((t,n)=>{i+=t+(e[n]||"")})),i};const bn="const loadingNode = document.createElement('div')\nloadingNode.className = 'pacman-box';\nloadingNode.innerHTML = '<style>.pacman-box{margin:0 auto;display:flex;vertical-align:middle;height:100vh;flex:0 1 auto;flex-direction:column;flex-grow:1;flex-shrink:0;flex-basis:25%;max-width:25%;align-items:center;justify-content:center}.pacman>div:first-of-type,.pacman>div:nth-child(2){width:0;height:0;border-right:25px solid transparent;border-top:25px solid grey;border-left:25px solid grey;border-bottom:25px solid grey;border-radius:25px;position:relative;left:-30px}@-webkit-keyframes rotate_pacman_half_up{0%,100%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}50%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate_pacman_half_up{0%,100%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}50%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes rotate_pacman_half_down{0%,100%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}50%{-webkit-transform:rotate(0);transform:rotate(0)}}@keyframes rotate_pacman_half_down{0%,100%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}50%{-webkit-transform:rotate(0);transform:rotate(0)}}@-webkit-keyframes pacman-balls{75%{opacity:.7}100%{-webkit-transform:translate(-100px,-6.25px);transform:translate(-100px,-6.25px)}}@keyframes pacman-balls{75%{opacity:.7}100%{-webkit-transform:translate(-100px,-6.25px);transform:translate(-100px,-6.25px)}}.pacman{transform: translateX(30px);position:relative}.pacman>div:nth-child(3){-webkit-animation:pacman-balls 1s -.66s infinite linear;animation:pacman-balls 1s -.66s infinite linear}.pacman>div:nth-child(4){-webkit-animation:pacman-balls 1s -.33s infinite linear;animation:pacman-balls 1s -.33s infinite linear}.pacman>div:nth-child(5){-webkit-animation:pacman-balls 1s 0s infinite linear;animation:pacman-balls 1s 0s infinite linear}.pacman>div:first-of-type{-webkit-animation:rotate_pacman_half_up .5s 0s infinite;animation:rotate_pacman_half_up .5s 0s infinite}.pacman>div:nth-child(2){-webkit-animation:rotate_pacman_half_down .5s 0s infinite;animation:rotate_pacman_half_down .5s 0s infinite;margin-top:-50px}.pacman>div:nth-child(3),.pacman>div:nth-child(4),.pacman>div:nth-child(5),.pacman>div:nth-child(6){background-color:grey;border-radius:100%;margin:2px;width:10px;height:10px;position:absolute;-webkit-transform:translate(0,-6.25px);transform:translate(0,-6.25px);top:25px;left:70px}</style><div class=\"pacman\"><div></div><div></div><div></div><div></div><div></div></div>'\nloadingNode.setAttribute('style', 'text-align: center;vertical-align: middle;line-height: 100vh;')\ndocument.body.insertBefore(loadingNode, document.body.firstChild);window.addEventListener('DOMContentLoaded', () => loadingNode.parentNode.removeChild(loadingNode))";const wn=new class{constructor(){const t=document.createElement("iframe");t.style.display="none",t.style.visibility="hidden",document.body.appendChild(t),this.safeWindow=t.contentWindow}getObjByPath(t,e){if(!t)return e;const i=this.getMethodAtPath(t);let n=e;return i.forEach((t=>{n=n[t]})),n}getMethodAtPath(t){return t.split(".")}recoverMethod(t){const e=this.getObjByPath(t,window);if(!this.isNative(e)){const e=this.getObjByPath(t,this.safeWindow);this.recover(t,e)}}recover(t,e){const i=this.getMethodAtPath(t),[n,...s]=i.reverse();this.getObjByPath(s.reverse().join("."),window)[n]=e}isNative(t){const e=Object.prototype.toString,i=Function.prototype.toString,n=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),s=typeof t;return"function"==s?n.test(i.call(t)):t&&"object"==s&&/^\[object .+?Constructor\]$/.test(e.call(t))||!1}};["MutationObserver","console.warn","console.error","console.log"].forEach(wn.recoverMethod.bind(wn));function vn(t){return i(this,void 0,void 0,(function*(){["HTMLElement.prototype.appendChild"].forEach(wn.recoverMethod.bind(wn));const e=(yield _n(t)).documentElement.outerHTML,i=`${t.exportName||"TimeCat"}-${d()}`;var n;n=i,function(t,e){const i=document.createElement("a");i.download=e,"string"==typeof t?(i.href=t,i.click()):(i.href=URL.createObjectURL(t),i.click(),URL.revokeObjectURL(i.href))}(new Blob([e],{type:"text/html"}),`${n}.html`)}))}function _n(t){return i(this,void 0,void 0,(function*(){const e=(new DOMParser).parseFromString('<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no, viewport-fit=cover">\n    <meta http-equiv="Content-Security-Policy-Report-Only" />\n    <title>TimeCat</title>\n</head>\n<body style="margin: 0; overflow: hidden">\n</body>\n</html>\n',"text/html");return yield function(t){return i(this,void 0,void 0,(function*(){xn(t,[{src:bn}])}))}(e),yield function(t,e){return i(this,void 0,void 0,(function*(){const i=e.records||rn()||function(){const t=Ki.getState().replayData.records;return t.length?t:null}()||(yield an());if(!i)return o("Records not found");const n=function(t){let e="";for(let i=0;i<t.length;i++){let n=t[i];~[13,34,39,44,60,62,92,96,10,0].indexOf(n)&&(n+=256),e+=String.fromCharCode(n)}return e}(function(t,e){const i=function(t,e){const{result:i}=new Fi(t,e);return i}(t,e),{level:n}=e||{};return Bi.gzip(JSON.stringify(i),{level:void 0!==n?n:6})}(function(t,e){return t.map(kn)}(Wi(i)).flat(1)));xn(t,[{src:`var G_REPLAY_STR_RECORDS = '${n}'`}])}))}(e,t),yield function(t,e){return i(this,void 0,void 0,(function*(){const{scripts:i,autoplay:n}=e,s={autoplay:n},r=i||[];r.some((t=>"timecat-init"===t.name))||r.push({name:"timecat-init",src:`new TimeCat.Player(${JSON.stringify(s)})`}),yield xn(t,r)}))}(e,t),e}))}function xn(t,e){return i(this,void 0,void 0,(function*(){if(e)for(const i of e){const{src:e,name:n}=i;let s=e;const r=document.createElement("script");n&&(r.id=n);/^((chrome-extension|https?):)?\/\/.+/.test(e)&&(s=yield x(e)),r.text=s,t.body.appendChild(r)}}))}function kn(t){const e=[],i=[];if(t.forEach((t=>{if(t.type===n.AUDIO){if("pcm"===t.data.type)return void e.push(t)}i.push(t)})),e.length){const t=function(t){let e="";const i=new Uint8Array(t),n=i.byteLength;for(let t=0;t<n;t++)e+=String.fromCharCode(i[t]);return btoa(e)}(function(t){const e=[];t.forEach((t=>{const{data:i}=t.data;e.push(...i)}));const i=[];for(let t=0;t<e.length;t++){const n=T(e[t]);i.push(n)}return k(i,{sampleBits:8,channelCount:1,sampleRate:48e3})}(e).buffer),s=i.length-1,r={type:"wav",encode:"base64",data:[t]},a=Object.assign(Object.assign({},i[s]),{time:e.slice(-1)[0].time,type:n.AUDIO,data:r});i.splice(s,0,a)}return i}var En;!function(t){t.INIT="init",t.PLAY="play",t.PAUSE="pause",t.STOP="stop",t.SPEED="speed",t.RESIZE="resize",t.PROGRESS="progress",t.JUMP="jump"}(En||(En={}));let Tn=class{constructor(t,e){this.options=t,this.c=e,this.init()}watchPlayerSpeed(t){t&&(this.paly(t.speed),this.setSpeed(t.speed))}init(){this.controller=this.c.container.querySelector(".player-keyboard"),this.playOrPauseBtn=this.c.container.querySelector(".play-or-pause"),this.createFastForwards(this.options.fastForward);const t=t=>{if(t.target&&"button"===t.target.type){const e=Number(t.target.getAttribute("speed"));this.dispatchPlay(e)}};this.controller.addEventListener("click",t,!1),this.options.destroyStore.add((()=>{this.controller.removeEventListener("click",t,!1)})),this.watchPlayerSpeed(),this.detectWindowIsActive()}createFastForwards(t){if(t=Array.from(new Set([1].concat(t)))){const e=t.reduce(((t,e)=>t+yn`<button type="button" class="speed" speed="${e}">${e}x</button>`),"");this.controller.append(...on(e))}}dispatchPlay(t=0){Ki.dispatch({type:Vi.SPEED,data:{speed:t}})}detectWindowIsActive(){const t=()=>{"hidden"===document.visibilityState&&this.dispatchPlay(0)};document.addEventListener("visibilitychange",t,!1),this.options.destroyStore.add((()=>{document.removeEventListener("visibilitychange",t,!1)}))}paly(t){0!==t?(this.playOrPauseBtn.innerText="〓",this.playOrPauseBtn.setAttribute("style","letter-spacing: 1px;font-weight: bold;"),this.playOrPauseBtn.removeAttribute("speed")):(this.playOrPauseBtn.innerText="▲",this.playOrPauseBtn.removeAttribute("style"),this.playOrPauseBtn.setAttribute("speed","1"))}setSpeed(t){const e=this.c.container.querySelectorAll(".speed");[...e].forEach((t=>{t.removeAttribute("disabled")}));const i=function(t){return[...e].findIndex((e=>e.getAttribute("speed")===t.toString()))}(t);i>-1&&e[i].setAttribute("disabled","")}};e([un((t=>({speed:t.player.speed})))],Tn.prototype,"watchPlayerSpeed",null),Tn=e([gn("player-keyboard",yn`<div class="player-keyboard"> <button class="play-or-pause" type="button" speed="1">▲</button> </div>`)],Tn);const Sn=[WebGLActiveInfo,WebGLBuffer,WebGLFramebuffer,WebGLProgram,WebGLRenderbuffer,WebGLShader,WebGLShaderPrecisionFormat,WebGLTexture,WebGLUniformLocation],An=Object.create(null),On=t=>An[t]||(An[t]=[]);function Dn(t){return i(this,void 0,void 0,(function*(){yield u();const{id:e,args:i}=t,n=C.getNode(e);if(!n)return;if(n.contextType){if("2d"===n.contextType)return}else n.contextType="webgl";const s=n.getContext("webgl",{preserveDrawingBuffer:!0});s&&i.forEach((({name:t,args:e})=>{const i=s[t];if("function"==typeof i){e=e.map((t=>{if("string"==typeof t){if(t.startsWith("$f32arr")){const e=t.slice(7).split(",");return new Float32Array(e)}if(t.startsWith("$arr")){return new Array(...t.slice(4).split(",")).map((t=>function(t){return!isNaN(parseFloat(t))&&isFinite(parseFloat(t))}(t)?+t:t))}if(t.startsWith("$")){const[e,i]=t.slice(1).split("@");if("src"===e){const t=document.createElement("img");return t.setAttribute(e,i),t}return On(e)[+i]}}return t}));const n=i.apply(s,e);if(null==n?void 0:n.constructor){const e=n.constructor.name;if(Sn.some((t=>t.name===e))||"getExtension"===t){const t=On(e);n&&Array.isArray(t)&&(~t.indexOf(n)||t.push(n))}}}}))}))}function Rn(t){const{family:e,source:i}=t,n=new Uint8Array(i.length);for(let t=0;t<i.length;t++){const e=i.charCodeAt(t);n[t]=e}const s=new window.FontFace(e,n);this.c.sandBoxDoc.fonts.add(s),document.fonts.add(s)}function In(t){var e;const{top:i,left:n,id:s,behavior:r}=t,a=s?C.getNode(s):this.c.sandBoxDoc.documentElement;if(!a)return;const o=window.G_REPLAY_DATA.snapshot.data.height,l={top:i,left:n,behavior:r||Math.abs(i-a.scrollTop)>3*o?"auto":"smooth"};try{a.scroll(l)}catch(t){"HTML"===a.nodeName?null===(e=a.ownerDocument.defaultView)||void 0===e||e.scroll(l):(a.scrollLeft=n,a.scrollTop=i)}}function Ln(t){const{width:e,height:i,id:n}=t;let s;n?(s=C.getNode(n),s.style.width=e+"px",s.style.height=i+"px"):(s=this.c.sandBoxDoc.body,this.c.resize({setWidth:e,setHeight:i}))}function Cn(t){const{x:e,y:i,id:n,type:s}=t;let a=0,o=0;if(n){const t=C.getNode(n);let e={};t&&t.getBoundingClientRect&&(e=t.getBoundingClientRect());const{left:i,top:s}=e;a=i,o=s}s===r.MOVE?this.pointer.move(e+a,i+o):s===r.CLICK&&this.pointer.click(e+a,i+o)}function Pn(t,e){const{parentId:i,nextId:n,node:s}=t,r=C.getNode(i);if(!r||!function(t){return t.nodeType===Node.ELEMENT_NODE}(r))return!0;{let t=null;if(n){if(e.has(n))return!0;if(t=(t=>t?C.getNode(t):null)(n),!t)return!0;if(!r.contains(t))return!0}const i=s;let a;"number"==typeof s?(a=C.getNode(s),e.has(s)&&e.delete(s)):a=function(t){return!!t.tag}(i)?nn(i):function(t){const{type:e,value:i,id:n}=t;let s;switch(e){case Node.TEXT_NODE:s=document.createTextNode(i);break;case Node.COMMENT_NODE:s=document.createComment(i)}return C.updateNode(n,s),s}(i),a&&r.insertBefore(a,t)}}function Nn(t,e){return i(this,void 0,void 0,(function*(){const{isJumping:r,speed:a}=e||{},o=r?0:200,{type:l,data:d}=t,c=()=>o?u(o):Promise.resolve();switch(l){case n.SNAPSHOT:!function(t){i(this,void 0,void 0,(function*(){const e=t,{frameId:i}=e;if(i){const t=C.getNode(i);if(t){const i=t.getAttribute("src");i&&(en(t,"disabled-src",i),en(t,"src",null));const n=t.contentDocument;ln(n,e),dn(n,e)}}}))}(d);break;case n.SCROLL:In.call(this,d);break;case n.WINDOW:Ln.call(this,d);break;case n.MOUSE:Cn.call(this,d);break;case n.DOM:r||1!==a||(yield c()),function(t){const{addedNodes:e,movedNodes:i,removedNodes:n,attrs:s,texts:r}=t;n&&n.forEach((t=>{const{parentId:e,id:i}=t,n=C.getNode(e),s=C.getNode(i);s&&n&&n.contains(s)&&n.removeChild(s)}));const a=new Set,o=i&&i.slice()||[];o.forEach((t=>{t.nextId&&o.some((e=>e.id===t.nextId))&&a.add(t.nextId)}));const l=o.map((t=>{const{id:e,parentId:i,nextId:n}=t;return{node:e,parentId:i,nextId:n}})).concat(e&&e.slice()||[]);if(l){const t=l.length,e=t>0?(t*t+t)/2:0;let i=0;for(;l.length;){const t=l.shift();t&&Pn(t,a)&&i++<e&&l.push(t)}}s&&s.forEach((t=>{const{id:e,key:i,value:n}=t,s=C.getNode(e);s&&en(s,i,n)})),r&&r.forEach((t=>{const{id:e,value:i,parentId:n}=t,s=C.getNode(n),r=C.getNode(e);if(s&&r){if(function(t){return t.ownerDocument&&!!t.ownerDocument.contains(t)}(r))return void(r.textContent=i);s.innerText=i}}))}(d);break;case n.FORM_EL:r||1!==a||(yield c()),function(t,e){const{isJumping:i}=e||{},{id:n,key:r,type:a,value:o,patches:l}=t,d=C.getNode(n),{mode:c}=Ki.getState().player.options;if(d)if(a===s.INPUT||a===s.CHANGE)if(l&&l.length){const t=(h=d.value,l.forEach((t=>{const{type:e,value:i,len:n}=t;switch(e){case"add":h=h.substring(0,t.index)+i+h.substring(t.index);break;case"rm":h=h.substring(0,t.index)+h.substring(t.index+n)}})),h);d.value=t}else r&&(d[r]=o);else a===s.FOCUS?"live"!==c&&!i&&d.focus&&d.focus({preventScroll:!0}):a===s.BLUR?"live"!==c&&!i&&d.blur&&d.blur():a===s.PROP&&r&&(d[r]=o);var h}(d,{isJumping:r});break;case n.LOCATION:!function(t){i(this,void 0,void 0,(function*(){const{path:e,hash:i,href:n,contextNodeId:s}=t,r=C.getNode(s);if(r){const t=r.ownerDocument.defaultView;t.G_REPLAY_LOCATION=Object.assign(Object.assign({},t.G_REPLAY_LOCATION),{path:e,hash:i,href:n})}}))}(d);break;case n.CANVAS_SNAPSHOT:r||1!==a||(yield c()),function(t){const{src:e,id:i}=t,n=C.getNode(i);if(!n||"HTMLCanvasElement"!==n.constructor.name)return;if(n.contextType){if("webgl"===n.contextType||"experimental-webgl"===n.contextType)return}else n.contextType="2d";const s=n.getContext("2d");if(s&&e){const t=new Image;t.src=e,t.onload=function(){s.drawImage(this,0,0)}}}(d);break;case n.CANVAS:r||1!==a||(yield c()),function(t){const e=t,{src:i,status:n,id:s,strokes:r}=e,a=C.getNode(s);if(!a||"HTMLCanvasElement"!==a.constructor.name)return;if(a.contextType){if("webgl"===a.contextType||"experimental-webgl"===a.contextType)return}else a.contextType="2d";const o=a.getContext("2d");if(o)if(i){const t=new Image;t.src=i,t.onload=function(){o.drawImage(this,0,0)}}else if(n)Object.keys(n).forEach((t=>{o[t]=n[t]}));else for(const t of r){const{name:e,args:i}=t,n="number"==typeof e?y[e]:e;if(Array.isArray(i)){const t=i.slice();if("createPattern"===n||"drawImage"===n){const e=new Image,i=t[0];if(i.length<10)continue;e.src=i,t[0]=e,e.onload=()=>{o[n].apply(o,t)}}else"putImageData"===n?(t[0]=new ImageData(new Uint8ClampedArray(t[0].data),t[1],t[2]),o[n].apply(o,t)):o[n].apply(o,t)}else o[n]=i}}(d);break;case n.FONT:Rn.call(this,d);break;case n.PATCH:!function(t){i(this,void 0,void 0,(function*(){const{id:e,key:i,url:n,tag:s,text:r}=t,a=C.getNode(e);a||(yield u(1e3));const o=a;if(o&&o.getAttribute(i)===n&&o.tagName===s.toUpperCase()&&"link"===s){const t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("css-url",n),t.innerHTML=r,o.replaceWith(t)}}))}(d);break;case n.WEBGL:Dn(d)}}))}let Mn=class{constructor(t,e,i,n,s){this.speed=0,this.recordIndex=0,this.frameIndex=0,this.isFirstTimePlay=!0,this.maxFrameInterval=250,this.maxFps=30,this.animationDelayTime=300,this.elapsedTime=0,this.audioOffset=150,this.curViewDiffTime=0,this.preViewsDurationTime=0,this.viewIndex=0,this.subtitlesIndex=0,this.maxIntensityStep=8,this.options=t,this.c=e,this.pointer=i,this.progress=n,this.broadcaster=s,this.init()}watchPlayerSpeed(t){if(t){const e=t.speed,i=this.speed;this.speed=e,z.emit(En.SPEED,e),e>0?(this.play(),0===i&&z.emit(En.PLAY)):this.pause()}}watchProgress(){this.recalculateProgress(),this.viewsLength=Ki.getState().replayData.packs.length}watcherProgressJump(){z.on(En.JUMP,(t=>i(this,void 0,void 0,(function*(){return this.jump(t,!0)}))))}init(){return i(this,void 0,void 0,(function*(){this.audioNode=new Audio,this.calcFrames(),this.viewsLength=Ki.getState().replayData.packs.length,this.initViewState(),this.setViewState(),this.records.length<=2?(window.addEventListener("record-data",this.streamHandle.bind(this)),this.options.destroyStore.add((()=>window.removeEventListener("record-data",this.streamHandle.bind(this))))):(this.watchProgress(),this.watchPlayerSpeed(),this.watcherProgressJump()),z.on(En.RESIZE,(()=>i(this,void 0,void 0,(function*(){yield u(500),this.recalculateProgress()})))),z.on(En.PROGRESS,(t=>{this.progress.setProgressPosition(t/(this.frames.length-1))}))}))}initAudio(){if(this.audioData)if(this.audioData.src)this.audioBlobUrl=location.href.split("/").slice(0,-1).join("/")+"/"+this.audioData.src;else{const{wavStrList:t,pcmStrList:e}=this.audioData;let i;const n=[];if(t.length?(i="wav",n.push(...t)):e.length&&(i="pcm",n.push(...e)),!i)return;const s=[];for(let t=0;t<n.length;t++){const e=T(n[t]);s.push(e)}const r="wav"===i?new Blob(s,{type:"audio/wav"}):function(t,e){const i=k(t,e);return new Blob([i],{type:"audio/wav"})}(s,this.audioData.opts),a=URL.createObjectURL(r);this.audioBlobUrl=a}}mountVideos(){this.videos&&this.videos.length&&this.videos.forEach((t=>{const{src:e,id:i}=t,n=C.getNode(i);if(n){const t=n;t.muted=!0,t.autoplay=t.loop=t.controls=!1,t.src=e}}))}streamHandle(t){const e=t.detail;if(h(e))return Ki.getState().replayData.currentData.snapshot=e,void this.setViewState();this.execFrame(e)}initViewState(){const{currentData:t}=Ki.getState().replayData,{records:e,audio:i,videos:n,head:s}=t;this.records=this.processing(e),this.audioData=i,this.videos=n;const{userAgent:r}=(null==s?void 0:s.data)||{};var a;(a=r)&&qi({ua:a})&&this.pointer.hidePointer(),this.records.length&&(this.subtitlesIndex=0,this.broadcaster.cleanText(),this.curViewStartTime=s&&s.time||e[0].time,this.curViewEndTime=e.slice(-1)[0].time,this.preViewsDurationTime=0,this.curViewDiffTime=0,this.viewIndex=0)}setViewState(){this.c.setViewState(),this.initAudio(),this.mountVideos()}jump(t,e=!1){return i(this,void 0,void 0,(function*(){let i;this.isJumping=!0,this.shouldWaitForSync=!0;const{speed:n}=Ki.getState().player,{index:s,time:r,percent:a}=t;e&&(this.pause(!1),i=on('<div class="lds-ring"><style>.lds-ring{margin-left:-40px;margin-top:-40px;width:80px;height:80px;position:absolute;left:50%;top:50%}.lds-ring div{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border:8px solid grey;border-radius:50%;animation:lds-ring 1.2s cubic-bezier(0.5,0,0.5,1) infinite;border-color:grey transparent transparent transparent}.lds-ring div:nth-child(1){animation-delay:-0.45s}.lds-ring div:nth-child(2){animation-delay:-0.3s}.lds-ring div:nth-child(3){animation-delay:-0.15s}@keyframes lds-ring{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}</style><div></div><div></div><div></div><div></div></div>')[0],this.c.container.appendChild(i),yield u(100));const o=this.getNextReplayData(s);if(!o)return;if(this.initViewState(),this.viewIndex!==s||this.startTime>=r){const[{packsInfo:t},{packs:e}]=[Ki.getState().progress,Ki.getState().replayData],i=t[s].diffTime;this.curViewEndTime=e[s].slice(-1)[0].time,this.curViewDiffTime=i,this.preViewsDurationTime=t.slice(0,s).reduce(((t,e)=>t+e.duration),0),this.viewIndex=s,this.records=e[s]}const d=1+this.frames.findIndex(((t,e)=>{if(r>=t&&r<=(this.frames[e+1]||t+1))return!0}));this.frameIndex=d,this.initTime=l(),this.recordIndex=0,this.audioData=o.audio,this.startTime=r,this.subtitlesIndex=0,void 0!==a&&(this.progress.moveThumb(a),yield u(100)),this.setViewState(),this.playAudio(),this.loopFramesByTime(this.frames[this.frameIndex]),i&&(yield u(100),this.c.container.removeChild(i),Ki.dispatch({type:Vi.SPEED,data:{speed:n}})),this.isJumping=!1,setTimeout((()=>this.shouldWaitForSync=!1),100)}))}getNextReplayData(t){const{packs:e}=Ki.getState().replayData,i=e[t];if(i){const t=sn(i);return Ki.dispatch({type:Gi.UPDATE_DATA,data:{currentData:t}}),t}return null}loopFramesByTime(t,e=!1){let i=this.frames[this.frameIndex];for(;i&&t>=i;)e||z.emit(En.PROGRESS,this.frameIndex,this.frames.length-1),this.frameIndex++,this.renderEachFrame(),i=this.frames[this.frameIndex];return i}play(){0===this.frameIndex&&(this.progress.moveThumb(),this.isFirstTimePlay?this.progress.drawHeatPoints():(this.getNextReplayData(0),this.initViewState(),this.setViewState())),this.playAudio(),this.isFirstTimePlay=!1,this.RAF&&this.RAF.requestID&&this.RAF.stop(),this.RAF=new A(function(t,e){return i(this,void 0,void 0,(function*(){const t=l()-this.initTime;if(this.frameIndex>0&&this.frameIndex>=this.frames.length)return void this.stop();const e=this.startTime+t*this.speed;if(this.loopFramesByTime(e)>this.curViewEndTime-this.curViewDiffTime&&this.viewIndex<this.viewsLength-1){const{packsInfo:t}=Ki.getState().progress,e=this.viewIndex+1,{startTime:i,diffTime:n}=t[e];this.jump({index:e,time:i-n})}this.elapsedTime=(e-this.frames[0])/1e3,this.syncAudio(),this.syncVideos()}))}.bind(this),this.maxFps),this.options.destroyStore.add((()=>this.RAF.stop())),this.RAF.start(),this.initTime=l(),this.startTime=this.frames[this.frameIndex]}playAudio(){this.audioData&&(this.audioBlobUrl?this.audioNode&&(this.audioNode.src&&this.audioNode.src===this.audioBlobUrl||(this.audioNode.src=this.audioBlobUrl),this.syncAudioTargetNode(),this.speed>0&&this.audioNode.play()):this.pauseAudio())}syncAudio(){if(!this.audioNode)return;Math.abs(this.elapsedTime-this.preViewsDurationTime/1e3-this.audioNode.currentTime)>(100+this.audioOffset)/1e3&&this.syncAudioTargetNode()}syncAudioTargetNode(){this.audioNode.currentTime=this.elapsedTime-this.preViewsDurationTime/1e3+this.audioOffset/1e3}syncVideos(){const t=this.curViewStartTime,e=t+(1e3*this.elapsedTime-this.preViewsDurationTime);this.videos.forEach((i=>{const{startTime:n,endTime:s,id:r}=i,a=C.getNode(r);if(a)if(e>=n&&e<s){a.paused&&this.speed>0&&a.play();const e=this.elapsedTime-this.preViewsDurationTime/1e3-(n-t)/1e3;Math.abs(e-a.currentTime)>.1&&(a.currentTime=e)}else a.paused||a.pause()}))}pauseAudio(){this.audioNode&&this.audioNode.pause()}pauseVideos(){this.videos&&this.videos.length&&this.videos.forEach((t=>{const e=C.getNode(t.id);e&&e.pause()}))}renderEachFrame(){let t;for(this.progress.updateTimer(this.frameIndex,this.frameInterval,this.curViewDiffTime);this.recordIndex<this.records.length&&(t=this.records[this.recordIndex]).time-this.curViewDiffTime<=this.frames[this.frameIndex];)this.execFrame(t),this.recordIndex++;this.syncSubtitles()}syncSubtitles(){return i(this,void 0,void 0,(function*(){if(!this.shouldWaitForSync&&this.audioData&&this.audioData.subtitles.length){const t=this.audioData.subtitles;let{text:e}=t[this.subtitlesIndex];const{end:i}=t[this.subtitlesIndex],n=c(i);if(this.elapsedTime>n/1e3&&(this.broadcaster.cleanText(),this.subtitlesIndex<t.length-1)){for(;;){if(c(t[this.subtitlesIndex].end)/1e3>this.elapsedTime)break;this.subtitlesIndex++}e=t[this.subtitlesIndex].text}this.broadcaster.updateText(e)}}))}pause(t=!0){this.RAF&&this.RAF.stop(),Ki.dispatch({type:Vi.SPEED,data:{speed:0}}),this.pauseAudio(),this.pauseVideos(),t&&z.emit(En.PAUSE)}stop(){this.speed=0,this.recordIndex=0,this.frameIndex=0,this.elapsedTime=0,this.pause(),this.audioNode.currentTime=0,z.emit(En.STOP)}execFrame(t){const{isJumping:e,speed:i}=this;Nn.call(this,t,{isJumping:e,speed:i})}calcFrames(t=this.maxFrameInterval){if("live"===this.options.mode)return[];const e=this.frames&&this.frames[this.frameIndex],{duration:i,startTime:n,endTime:s}=Ki.getState().progress;this.frameInterval=Math.max(20,Math.min(t,i/60/1e3*60-40));const r=this.frameInterval,a=[];let o;for(let t=n;t<s+r;t+=r)a.push(t),!o&&e&&t>=e&&(o=a.length-1);a.push(s),o&&(this.frameIndex=o),this.frames=a}calcHeatPointsData(){const t=this.frames;if(!(null==t?void 0:t.length)||!this.options.heatPoints)return[];const e=Ki.getState(),{packs:i}=e.replayData,{duration:n}=e.progress,s=n/Math.floor(this.progress.slider.offsetWidth/7);return i.reduce(((t,e)=>{let i=0,n=0,r=!1;const a=e.slice(-1)[0].time;let o=e[0].time;for(;o<a&&i<e.length;){const a=e[i];a.time<o+s?(i++,n++,h(a)&&(r=!0)):(t.push({step:n,snapshot:r}),n=0,r=!1,o+=s)}return t}),[])}orderRecords(t){return t.length?(t.sort(((t,e)=>t.time-e.time)),t):[]}recalculateProgress(){this.calcFrames(),this.progress.drawHeatPoints(this.calcHeatPointsData())}processing(t){return this.orderRecords(t)}};e([un((t=>({speed:t.player.speed})))],Mn.prototype,"watchPlayerSpeed",null),e([un((t=>({endTime:t.progress.endTime})))],Mn.prototype,"watchProgress",null),Mn=e([gn("timecat-player",yn`<div class="timecat-player"> <iframe class="player-sandbox" sandbox="allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox" ></iframe> </div>`)],Mn);let zn=class{constructor(t){this.x=0,this.y=0,this.c=t,this.initPointer(),this.togglePointer(!0)}initPointer(){this.pointer=this.c.container.querySelector(".player-pointer")}togglePointer(t=!this.show){this.show=t,this.pointer.firstElementChild.style.display=this.show?"inherit":"none"}hidePointer(){this.togglePointer(this.show=!1)}move(t,e){this.x=t,this.y=e,this.pointer.style.left=this.x+"px",this.pointer.style.top=this.y+"px"}click(t,e){return i(this,void 0,void 0,(function*(){this.move(t,e),this.pointer.hasAttribute("active")||(yield u(200),en(this.pointer,"active",""),yield u(400),en(this.pointer,"active",null))}))}};zn=e([gn("player-pointer",yn`<div class="player-pointer"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAACACAQAAAAhBLbAAAAMkklEQVR42u2ceXAb5RXAfyvJh2xLcqw4dmQ7thPbOSGEOLJbjtIUBgi0wxSmMNNSoDTQMrRAIIUm8E+HuwfD0OkwPZgGUmiBNswUmvhIoBkIsS0DCTShSYAcxHYS27ItW7e0/UOr9a7sla3Tnqnfjjz77fft6uent+977+0BczInczInczInWRYBQf47a0RIqE+cadypoAXpI6KTgMXZgq2LiyyWFK4wEyIHPTp0s81MJkLrMEBx7WdtVzUAJozkYkA3m7EF9OSAYB4LiM6aYqCEQvJmN7YOPXkIwvxTvaJ4+COzBVhAEfnkzF5sAQNGcgTbqV5RFMXDn5hLgXJMsxdbQEcOheQL1af6RFEURfHTQ2YbAgsV2DMGrovTF0GX0JYu73rbXMkZishBj34mda0NLUgeRIZraHDsNlfJ2DOoa13cXkHdX1/vaLcs4ixF5Eh+ZEawp4KOwaqv69o989i6RHeoX9zVVlzDuZnEngp6EqD6JZ0tJTWytvXZx57KPCaV+iUdLdZaCVuffeyEzSMidYs7W621KgeYRfAEoN+lQ9FaXOtosy6O8dtZwk4A+gDNnFK0a2q62+cvmYnpJgFoG7CWHsWW6mpH+/y67E83Cdr0ORr5Uom9qLu9tI4zmLLpABM+EXu5BKeivajK0V7aQF82HWAS3uM4zTHYXa1lS2M8yWyDhiM0MaBoV1d1tpRHsHOzgZ2knz4ag72oqqvVtow+CrPht5OEhs+wq7ArK7tabcsl286w304aGj6nUYVtq3C02ZbThynT2ClAw3HW0q9oL7Q5dttW0Kuw7YxIStBwgkY1dnn3bttKFXYGwFOEhhOs45yiXV7W3VZxHr0UZg47ZWg4jp0zSuxyR2tlFDsj000aoOE4TfSpsLtaFp1Pb6amm7RAwwma6FVhd7ZUr6ZHZSRpA08TNJzErsIuK+9qrblAZdtpc4Bpg4YvaVRhly5wRLCL0o2dRmjoYa0K21rqaK9ZQw9F8imZFuy0QkNvTJpgtXa3166RTklDuqabNENDL40q7JKSfW/aooFrmhxg2qEj2MrsptzmaLXVpxM7A9DQi52TivbCqq7WijRiZwQaemnihKJtq+psrWpIV50kQ9DQh53jauyWRersJmlPkjFoOMs6FXZ5VVdL9bJ0YGcQGvpjsBdUOlqql9GXqt/OKDT006jCnl/haK1eoSo4JCEZhoaBWGybo616ZWp1koxDR7A/V2KXd7fVpISdBWgYwM5nira1zNFauyp57KxAwwBNHFVil3e1LF6likkSAM8SdAT7iAq7s6Xu/JhQaprYWYMGJ3b+G4Ndf0Ey5Z0sQsMwdpW255V17WpYLaUJCWg7q9AwwjoVtmVBZ0vDGnql+vY0/XaWoSPYSiOxlHa1NkSym2l7kqxDwwh2PlW0zdautoYLYzzJbIOOYB9SYpd0tSy9UJFLTnE/yYxAg4tmlZGYrZ0tyxvpoVBx7UYTfIagwcVlqgt8ZmvHrhWNKtvW9CQzBh1JE5TZjcna0bLKTg+mqRzgDEJPzG6KSjp2ntfEabl0qZsce0ahJ2Y3BSX7d53XLJ+SGrY9w9DQTy1tSuzijl3nNXMaE3laoZQhk0DzuZ1RgnHH5HCQ3Vyh2GK0dLTYr/pkPzZAIEgImMZdrgI6cjFhEVadOidK8g+RhJducToSFsMxW9zD538VgSrmUUBu7ISTYfO4Z1qjJpqt0dyxc/VXOCUVinXqUzLD0O/y1yT3zDd37FzTzJcUTLx1MU3QC5iv0fN40sfMM3/wzqVX0DPxtty0QFs5zcMafR/zvKIVCA6PESYkLWHVElIsQYIEyHvnxSY7ThlZAk+D97DSgYFbeJyzGrr+AbnSeo7h7pe2d9ZaQ34hRGjSu99FREJCEJ/gDYzUlrgMFEojhOjIlKEr2UcVUMxmNk864hS/YovcunXd9te/OEsQPwFChCdxZWFEQvjx4fnShQEjY+oBKZpHDR9SJa1volZj1NOKq7rfWHXLFZxDT5gQAfyTLAHJN+vJw4SAT/rX5H8vJeilOBQnoI6tGuOGeUrRevg6vZEBxhhhGCdOBlXLAIMM4mSYEUZx4yNISAIWU4a+kANYVVtuZ43G2GcVxZq6mnuv5CQB3LhwMRyzjEh/RxhlDA8+goTVZpQ09FreJ2/CVi1dB1S63nKzpRInIfx48eDGzZhicePGjQcPXvwECMinbGrQ63HIHkEp1/N1jT3+wEfyeknpz79DPzpEQgQJ4JvUtqPA4VibnlymiD3WxwYPofHgoU0zDrlBGVuMVl5COZUUY5SfolEvkZvOhcmivCQ0fQO7VW2X52vPvSMX6i7nOo39Xudted1YuOU23KonZ0RE1VQT3SaqTSMpTd8Yo2SPr+kxLrrl9+NbHJq6Vv1CwVVXMp9KisnHkFjdNAFNh4GbYwKgMW/jIx3vUb+ttVtOrtdym8YR9rBjvKHfupEQuXL2nYAkAH2CDbwYg2zf+p9uivFw5rG/jW/fqnkMZfh00/UXrcdJPoZEnwtLAPqWGC33j6y+/1A3ZgYZJG/Hzrf3R3uWcJ/GMRz8WdHaupEcDIk/E5YAtBWTonV2aO2mzw5ixomTIdw4H31pvHezaqxa12F5/eorr9lAP/lZqk/3Ou2bTx7FgpMhaRYr2tP299Zo/0Ie0NjzKM8qWg/fiQVBkZ1kDvrT3lU/PXEEE06GGMGFCxceAk+8MD7mfio19n4Sl7ze3Pz96+jHKD8PlqlS7+Ee+/2DpyjCKcUHkSl3DFP3vj+9Fh1VyM809j/LLxWth35MGSFypCkmM5o+cNL+gKuHIobkkMaPDx9ePBge3xb0R0f+hGUax/i14o6Q5SvuuokBjHK1NOUrARNmon1H19w32kchgxKyV4p/A/jxUvj5h79RnI5ars/NE4rWljsKa/FLdp0WTauw3zty8YPiEEacjOBiDC8BOasL4MdDwVMvj8h3hH+PJo3D/pbD8npF9aabccoxSHqvBLR+fPED4hB5kpbdeKUcIxI1RAJN4+DhJ7eN7/OI5tGU08yDd5Stwj39m2qn1rSk6ze7r7yX0QnIYTmyCBHEzxjFz7x6Ur6t5hqu0jjwduS5iMKSh27FRf50dT2VTUvIb+3/5j2EMDAg23IUOWJCYcJSZKz3nnhCoWvtKf0XivW7f7jYjkua0qd0fdrQ0o8u6OC1f117B2H0OHFJeZtfoWWkT8Su3cx7fscB+UrQxdyo8QU72SuvG/Ie2YhPCp+SvKEi+oytUVcnhvbuYSGruZg1NFCJlaJJHsUWENCTjwUbK6m86YHxGPTgpGHqInGb6FcFues2YKECM3lTXeHSa0ALkWm1oko/dPtDfiMFuKRpJJIdT6xXRGtAOgTMnxxZ31gtTYllnMGhGlrMs2xndcyXl1te2YFRSmOTEh0G8jHryvT5LGQZS1hEGfOkCwuT6UFAwEAeFhayjMrL7xzX4UkxR9Zwrvj4hMJuVL61ESOlFJEbP+rTa/YICAhiWMxHj09a/HINQpx0j+hHh+Xzo6uXLV8S6bDg4V0ANrGL9Ro8b+35S+vAgFRGn2aKFQsQ0XUhZoopxkyR5P7jWZuAnjzMlLGU6nXfHddhj2gWrxXPiVryxvv1G6mmgWUswCSV0eN8TRw9S5YdeWGGSAiRMPFSeQHQk0M+JiwMv/DMbd+OdIi4KNJwVTsP3P/y4b2EyWeYYUbxECAYT9dC3O1RnymCyr3FO1rkLQoFmAk3rDz8mi43znj+fWjTqx/sJUyBVG8aw42PgORONUQf54hK2OghprK0cR+iwzTwxbzS5gu0hnYdu+F3jz7f+wUmRCmWic4AU5QN4rtxde/0Tg1B1rUJYX7Nsdct5omDjpy+65Xd7fgw4WcMD268ePEpCsBxvi2eppOTqK4FdJjcJwxF62NCvb7Bjdt+9OwXBylEh0vKfNyylievWSeg6WSxIx7biAlDvvXYqxUV0a5R95Ydz73BGcyEGcONF49UyQvKwFPW7dKvabW/Lgie9uVuuBQgFHjynxuefr8dHfmMMoJLSta8Ch0zNXKmHr6LRCK5GCkil5xjbyyp++POza8MHcOMgTE8qkJuQK7eTfP9Q5mD1mEglwLM+K6+LGBpb8OKCQ9eCdhHQEoiEgLOJHT0VT15GLEwgoEKkDLJqDkEkgHOHHTkyDoJO488cqUSekACDsrF8iReSZXJuxBEwgSBMEG8CCBd1EwJOBvQkRk1KIUdkeuyKQFDZl+5EH3/23iqKsakaCkcOJMiKD7KEy6lF6tl/s0Fsd8wK94DNydzMif/n/I/5OjlEWH8JT8AAAAASUVORK5CYII=" alt="pointer" /> <div class="spinner"></div> </div>`)],zn);let Bn=class{constructor(t,e){this.heatPoints=[],this.findProgressByPosition=(()=>{const t=new Map;return function(e){const i=t.get(e);if(i)return i;const{startTime:n,duration:s,packsInfo:r}=Ki.getState().progress,{packs:a}=Ki.getState().replayData,o=n+s*e,l=r.findIndex((t=>{const{startTime:e,endTime:i,diffTime:n}=t;if(e-n<=o&&i-n>=o)return!0}));if(void 0!==l){const i=a[l],n=r[l],{startTime:s,diffTime:d}=n,c=r.reduce(((t,e)=>t+e.duration),0),h=r.slice(0,l).reduce(((t,e)=>t+e.duration),0);for(let n=0;n<i.length;n++){const r=i[n],a=i[n+1];if(a&&o>=r.time-d&&o<=a.time-d){const i={index:l,percent:e,time:r.time-d+(c*e-(r.time-s)-h)};return t.set(e,i),i}}}return null}})(),this.listenElementOnHover=t=>function(t,e,i){let n=i,s=0;return i=>{t((function(t){s&&clearTimeout(s),s=window.setTimeout((()=>{n!==t&&(i(t),n=t,clearTimeout(s),s=0)}),"number"==typeof e?e:e(t))}))}}((e=>{const i=()=>e("in"),n=()=>e("out");t.addEventListener("mouseover",i,!1),t.addEventListener("mouseout",n,!1),this.options.destroyStore.add((()=>{t.removeEventListener("mouseover",i,!1),t.removeEventListener("mouseout",n,!1)}))}),(t=>"in"===t?200:1e3),"out"),this.options=t,this.c=e,this.progress=e.container.querySelector(".player-progress"),this.progress=e.container.querySelector(".player-progress"),this.timer=e.container.querySelector(".player-timer"),this.currentProgress=this.progress.querySelector(".player-current-progress"),this.slider=this.progress.querySelector(".player-slider-bar"),this.heatBar=this.progress.querySelector(".player-heat-bar"),this.thumb=this.progress.querySelector(".player-thumb"),this.listenElementOnHover(this.parent)((t=>{"in"!==t?this.thumb.removeAttribute("active"):this.thumb.setAttribute("active","")}));const i=t=>{const{left:e,width:i}=this.slider.getBoundingClientRect(),n=+(Math.max(0,Math.min(t.x-e,i))/i).toFixed(3),s=this.findProgressByPosition(n);z.emit(En.JUMP,s)};this.progress.addEventListener("click",i,!1),this.options.destroyStore.add((()=>{this.progress.removeEventListener("click",i,!1)}))}updateTimer(t,e,i){const n=this.c.options,{timeMode:s}=n,r=(t+1)*e;let a;if("durationTime"===s)a=function(t){t<=0&&(t=0);const[e,i,n]=[Math.floor(t/3600),Math.floor(t/60%60),Math.floor(t%60)];return[e,i,n].map((t=>t<=9?"0"+t:t)).join(":").replace(/^00\:/,"")}(r/1e3);else{const{startTime:t}=Ki.getState().progress;a=function(t){const e=new Date(t),i=e.getHours(),n="0"+e.getMinutes(),s="0"+e.getSeconds();return(i<10?"0"+i:i)+":"+n.substr(-2)+":"+s.substr(-2)}(t+r+i)}a!==this.timer.innerText&&(this.timer.innerText=a)}moveThumb(t=0){this.currentProgress.style.width=t*this.slider.offsetWidth+"px"}drawHeatPoints(t){if(t){if(function(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){const n=t[i],s=e[i];if(n.step!==s.step||n.snapshot!==s.snapshot)return!1}return!0}(this.heatPoints,t))return;this.heatPoints=t}else if(this.heatPoints.length)return;this.heatPoints.length?new fn(this.heatBar,this.heatPoints):new mn(this.heatBar)}setProgressPosition(t){this.currentProgress.style.width=this.slider.offsetWidth*t+"px"}};Bn=e([gn("player-progress",yn`<div class="player-progress"> <div class="player-timer">00:00</div> <div class="player-slider-bar"> <div class="player-heat-bar-container"> <canvas class="player-heat-bar"></canvas> </div> <div class="player-current-progress"> <div class="player-thumb"></div> </div> </div> </div>`)],Bn);let Un=class{constructor(t){this.c=t,this.init()}init(){this.broadcaster=this.c.container.querySelector(".player-broadcaster"),this.floatLayer=this.broadcaster.firstElementChild,this.subtitle=this.floatLayer.firstElementChild}updateText(t){t=t.trim(),this.subtitle.innerText.trim()!==t&&(this.subtitle.innerText=t,this.floatLayer.toggleAttribute("hidden",!t))}cleanText(){this.updateText("")}};Un=e([gn("player-broadcaster",yn`<div class="player-broadcaster"> <div class="float-layer" hidden> <span class="subtitle"></span> </div> </div>`)],Un);let Fn=class{constructor(t,e){this.options=t,this.c=e,this.exportBtn=this.target.querySelector(".player-export"),this.exportBtn.addEventListener("click",this.export),this.fullscreenBtn=this.target.querySelector(".player-fullscreen"),this.fullscreenTarget=this.c.container.parentNode.host.parentElement,this.fullscreenTarget.addEventListener("fullscreenchange",(()=>this.cancelFullScreen())),this.fullscreenBtn.addEventListener("click",(()=>this.setFullScreen())),this.options.destroyStore.add((()=>{this.exportBtn.removeEventListener("click",this.export),this.fullscreenTarget.removeEventListener("fullscreenchange",(()=>this.cancelFullScreen())),this.fullscreenBtn.removeEventListener("click",(()=>this.setFullScreen()))}))}export(){return i(this,void 0,void 0,(function*(){const t=document.querySelector("#timecat"),e=document.querySelector("#timecat-init"),n=[],s=document.querySelectorAll("script");function r(t){return i(this,void 0,void 0,(function*(){if(t)return t.textContent||(yield _(t.src.trim()))||t.src}))}const a=(yield r(t))||Array.from(s).map((t=>t.src)).find((t=>/(timecat)(\.prod)?\.global\.js/.test(t)))||Array.from(s).map((t=>t.textContent)).find((t=>null==t?void 0:t.trim().startsWith("var TimeCat")))||"//cdn.jsdelivr.net/npm/timecatjs/dist/timecat.global.prod.js";n.push({name:"timecat",src:a});const o=(yield r(e))||Array.from(s).map((t=>t.textContent)).find((t=>{if(t)return/new\s(TimeCat\.)?Player/.test(t)}))||"new window.TimeCat.Player({autoplay: true})";n.push({name:"timecat-init",src:o});const l=Ki.getState().player.options;vn(Object.assign(Object.assign({},l),{scripts:n}))}))}setFullScreen(){this.c.resize({maxScale:100}),this.fullscreenTarget.requestFullscreen().catch((t=>{o(t),function(t){console.log(`%c TimeCat Advice: ${t}`,"color:#0f0;")}("If the Player within the iframe, you should be set the attribute: allowfullscreen")}))}cancelFullScreen(){document.fullscreen||this.c.resize({maxScale:0})}};Fn=e([gn("player-toolbox",yn`<div class="player-toolbox"> <div class="player-export"> <button type="button"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 511.994 511.994" style="enable-background:new 0 0 511.994 511.994;" xml:space="preserve" > <path style="fill:#fff;" d="M403.079,310.458c-3.627-7.232-11.008-11.797-19.093-11.797h-64v-85.333c0-11.776-9.536-21.333-21.333-21.333H213.32 c-11.776,0-21.333,9.557-21.333,21.333v85.333h-64c-8.064,0-15.445,4.565-19.072,11.797c-3.605,7.232-2.837,15.872,2.027,22.336 l128,170.667c4.011,5.376,10.347,8.533,17.045,8.533c6.72,0,13.056-3.157,17.067-8.533l128-170.667 C405.917,326.33,406.685,317.69,403.079,310.458z" /> <path style="fill:#fff;" d="M298.663,128.001H213.33c-11.797,0-21.333,9.536-21.333,21.333c0,11.797,9.536,21.333,21.333,21.333h85.333 c11.797,0,21.333-9.536,21.333-21.333C319.996,137.537,310.46,128.001,298.663,128.001z" /> <path style="fill:#fff;" d="M298.663,64.001H213.33c-11.797,0-21.333,9.536-21.333,21.333s9.536,21.333,21.333,21.333h85.333 c11.797,0,21.333-9.536,21.333-21.333S310.46,64.001,298.663,64.001z" /> </svg> </button> </div> <div class="player-fullscreen"> <svg version="1.1" id="Capa_1" width="16px" height="16px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 469.333 469.333" style="enable-background:new 0 0 469.333 469.333;" xml:space="preserve" > <path style="fill:#fff;" d="M160,0H10.667C4.771,0,0,4.771,0,10.667V160c0,5.896,4.771,10.667,10.667,10.667H32c5.896,0,10.667-4.771,10.667-10.667 V42.667H160c5.896,0,10.667-4.771,10.667-10.667V10.667C170.667,4.771,165.896,0,160,0z" /> <path style="fill:#fff;" d="M458.667,0H309.333c-5.896,0-10.667,4.771-10.667,10.667V32c0,5.896,4.771,10.667,10.667,10.667h117.333V160 c0,5.896,4.771,10.667,10.667,10.667h21.333c5.896,0,10.667-4.771,10.667-10.667V10.667C469.333,4.771,464.563,0,458.667,0z" /> <path style="fill:#fff;" d="M458.667,298.667h-21.333c-5.896,0-10.667,4.771-10.667,10.667v117.333H309.333c-5.896,0-10.667,4.771-10.667,10.667 v21.333c0,5.896,4.771,10.667,10.667,10.667h149.333c5.896,0,10.667-4.771,10.667-10.667V309.333 C469.333,303.437,464.563,298.667,458.667,298.667z" /> <path style="fill:#fff;" d="M160,426.667H42.667V309.333c0-5.896-4.771-10.667-10.667-10.667H10.667C4.771,298.667,0,303.437,0,309.333v149.333 c0,5.896,4.771,10.667,10.667,10.667H160c5.896,0,10.667-4.771,10.667-10.667v-21.333 C170.667,431.438,165.896,426.667,160,426.667z" /> </svg> </div> </div>`)],Fn);let jn=class{constructor(t){this.c=t,this.options=t.options,this.options.hidePanel&&(this.target.style.display="none"),this.initComponent()}initComponent(){new Fn(this.options,this.c),this.keyboard=new Tn(this.options,this.c),this.progress=new Bn(this.options,this.c),this.pointer=new zn(this.c),this.broadcaster=new Un(this.c),this.player=new Mn(this.options,this.c,this.pointer,this.progress,this.broadcaster)}};jn=e([gn("player-panel",yn`<div class="player-panel"> <slot></slot> </div>`)],jn);let Hn=class{constructor(){setTimeout((()=>{}))}};Hn=e([gn("player-start-page",yn`<div class="player-start-page" style="display: none;"> <div class="play-btn"> <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 142.448 142.448" style="enable-background:new 0 0 142.448 142.448;" xml:space="preserve" > <g> <path style="fill:#bbb;" d="M142.411,68.9C141.216,31.48,110.968,1.233,73.549,0.038c-20.361-0.646-39.41,7.104-53.488,21.639 C6.527,35.65-0.584,54.071,0.038,73.549c1.194,37.419,31.442,67.667,68.861,68.861c0.779,0.025,1.551,0.037,2.325,0.037 c19.454,0,37.624-7.698,51.163-21.676C135.921,106.799,143.033,88.377,142.411,68.9z M111.613,110.336 c-10.688,11.035-25.032,17.112-40.389,17.112c-0.614,0-1.228-0.01-1.847-0.029c-29.532-0.943-53.404-24.815-54.348-54.348 c-0.491-15.382,5.122-29.928,15.806-40.958c10.688-11.035,25.032-17.112,40.389-17.112c0.614,0,1.228,0.01,1.847,0.029 c29.532,0.943,53.404,24.815,54.348,54.348C127.91,84.76,122.296,99.306,111.613,110.336z" /> <path style="fill:#bbb;" d="M94.585,67.086L63.001,44.44c-3.369-2.416-8.059-0.008-8.059,4.138v45.293 c0,4.146,4.69,6.554,8.059,4.138l31.583-22.647C97.418,73.331,97.418,69.118,94.585,67.086z" /> </g> </svg> </div> </div>`)],Hn);class Zn{constructor(t){this.options=t,this.init()}init(){const t=this.options.target,e="string"==typeof t?document.querySelector(t):t;this.target=e,this.initTemplate(),this.initSandbox();const{resize:i}=this.makeItResponsive();this.resize=i,this.initPanel(),setTimeout((()=>z.emit(En.INIT)))}initPanel(){this.panel=new jn(this),new Hn}initSandbox(){this.sandBox=this.container.querySelector(".player-sandbox"),this.sandBoxDoc=this.sandBox.contentDocument,this.setSmoothScroll(this.sandBox.contentWindow),ln(this.sandBoxDoc,this.getSnapshotRecord()),this.options.disableScrolling&&function(t){const e={37:1,38:1,39:1,40:1};function i(t){t.preventDefault()}function n(t){if(e[t.keyCode])return i(t),!1}let s=!1;try{t.addEventListener("test",(()=>{}),Object.defineProperty({},"passive",{get:function(){s=!0}}))}catch(t){}const r=!!s&&{passive:!1},a="onwheel"in document.createElement("div")?"wheel":"mousewheel";t.addEventListener("DOMMouseScroll",i,!1),t.addEventListener(a,i,r),t.addEventListener("touchmove",i,r),t.addEventListener("keydown",n,!1)}(this.sandBox.contentWindow.document),this.setViewState()}getSnapshotRecord(){return Ki.getState().replayData.currentData.snapshot.data}setSmoothScroll(t){N.polyfill(),t.HTMLElement.prototype.scroll=window.scroll,t.HTMLElement.prototype.scrollTo=window.scrollTo}setViewState(){C.reset();const t=this.getSnapshotRecord(),{pathname:e,hash:i,href:n}=f(t.href),s=this.sandBoxDoc.defaultView;s.G_REPLAY_LOCATION=Object.assign(Object.assign({},s.G_REPLAY_LOCATION||{}),{path:e,hash:i,href:n}),dn(this.sandBoxDoc,t)}initTemplate(){const t=this.target instanceof Window?this.target.document.body:this.target,e=on(yn`<div class="player-shadowhost"></div>`)[0];t.appendChild(e);const i=e.attachShadow({mode:"open"});i.appendChild(this.createStyle("player-css","/**\n * Copyright (c) oct16.\n * https://github.com/oct16\n * \n * This source code is licensed under the GPL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nbody {\n  margin: 0;\n  background-color: #e2e2e2;\n  overflow: hidden;\n}\n.player-main {\n  box-shadow: 0px 0px 5px rgba(26, 26, 26, 0.05);\n  transition: all 0.5s;\n  -webkit-transition: all 0.5s;\n  opacity: 0;\n  position: relative;\n  overflow: visible;\n}\n.player-sandbox {\n  background: white;\n  vertical-align: top;\n  border: 0;\n  width: 100%;\n  height: 100%;\n}\n.timecat-player {\n  position: relative;\n  width: inherit;\n  height: inherit;\n}\n.player-pointer {\n  width: 10px;\n  height: 10px;\n  position: absolute;\n  transition: all 0.2s;\n}\n.player-pointer img {\n  width: 15px;\n  position: absolute;\n  z-index: 100;\n  top: -5px;\n  left: -3px;\n}\n.player-pointer[active] .spinner {\n  width: 32px;\n  height: 32px;\n  left: -17px;\n  top: -18px;\n  position: absolute;\n  background-color: #333;\n  border-radius: 100%;\n  -webkit-animation: spinner-scale 0.4s 1 ease-in-out;\n  animation: spinner-scale 0.4s 1 ease-in-out;\n}\n@-webkit-keyframes spinner-scale {\n  0% {\n    -webkit-transform: scale(0);\n  }\n  100% {\n    -webkit-transform: scale(1);\n    opacity: 0.2;\n  }\n}\n@keyframes spinner-scale {\n  0% {\n    -webkit-transform: scale(0);\n    transform: scale(0);\n  }\n  100% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: 0.2;\n  }\n}\n.player-container {\n  background: grey;\n}\n.player-panel {\n  width: 100%;\n  box-sizing: border-box;\n  padding: 5px 10px;\n  height: 40px;\n  position: absolute;\n  left: 0;\n  bottom: -41px;\n  background: black;\n  opacity: 0.8;\n  display: flex;\n  user-select: none;\n}\n.player-broadcaster {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  bottom: 50px;\n  display: flex;\n  justify-content: center;\n}\n.player-broadcaster .float-layer {\n  margin: 0 10px;\n  line-height: 20px;\n  color: #fff;\n  background-color: rgba(0, 0, 0, 0.6);\n  border-radius: 2px;\n  padding: 5px;\n  box-shadow: 0px 0px 2px rgba(26, 26, 26, 0.5);\n  text-align: center;\n}\n.player-broadcaster .float-layer[hidden] {\n  display: none;\n}\n.player-keyboard {\n  white-space: nowrap;\n}\n.player-keyboard button[disabled] {\n  cursor: default;\n  color: #999;\n}\n.player-export button,\n.player-keyboard button {\n  border: none;\n  background: none;\n  color: white;\n  outline: none;\n  cursor: pointer;\n  font-size: 14px;\n  padding: 0 5px;\n}\n.player-export button.play-or-pause,\n.player-keyboard button.play-or-pause {\n  padding: 0;\n  text-indent: 1px;\n  transform: rotate(90deg);\n  width: 18px;\n}\n.player-progress,\n.player-keyboard,\n.player-toolbox,\n.player-timer {\n  display: flex;\n  align-items: center;\n}\n.player-export {\n  display: flex;\n}\n.player-export button {\n  padding: 2px 0 0 0;\n  padding-left: 2px;\n}\n.player-fullscreen {\n  margin-left: 8px;\n  cursor: pointer;\n  display: flex;\n}\n.player-progress {\n  width: 100%;\n  cursor: pointer;\n}\n.player-progress .player-timer {\n  margin-left: 2px;\n  padding: 0 4px;\n  color: white;\n  font-size: 14px;\n  font-family: Helvetica;\n}\n.player-slider-bar {\n  position: relative;\n  width: calc(100% - 20px);\n  height: 23px;\n  margin: 7.5px 8px;\n  border-radius: 2.5px;\n}\n.player-heat-bar-container {\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  overflow: hidden;\n  background: black;\n}\n.player-heat-bar {\n  height: 16px;\n  width: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  margin: 2px 0px 0 0px;\n  background: black;\n  transform: rotateZ(180deg) rotateY(180deg);\n}\n.player-thumb {\n  width: 2px;\n  border: 1px solid white;\n  border-radius: 1px;\n  height: 95%;\n  background: #fff;\n  cursor: pointer;\n  position: absolute;\n  right: 0px;\n  top: 0;\n  z-index: 10;\n  transition: all 0.3s;\n  box-shadow: 0px 0px 5px black;\n}\n.player-thumb[active] {\n  background: red;\n  border-color: red;\n}\n.player-current-progress {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 0;\n  height: 100%;\n}\n.player-start-page {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: calc(100% + 42px);\n  -webkit-backdrop-filter: blur(1.5px);\n  backdrop-filter: blur(1.5px);\n  transition: 0.5s all;\n  cursor: pointer;\n}\n.player-start-page .play-btn {\n  position: absolute;\n  margin: auto;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: 100px;\n  height: 100px;\n  transition: all 0.5s;\n  transform: scale(0);\n  opacity: 0;\n}\n.player-start-page .play-btn.show {\n  transform: scale(1);\n  opacity: 1;\n}\n")),i.appendChild(this.createContainer("player-main",'<div class="player-container">\n    <timecat-player></timecat-player>\n    <player-panel>\n        <player-broadcaster></player-broadcaster>\n        <player-keyboard></player-keyboard>\n        <player-progress></player-progress>\n        <player-toolbox></player-toolbox>\n    </player-panel>\n    <player-start-page></player-start-page>\n    <player-pointer></player-pointer>\n</div>\n')),this.shadowHost=e}createContainer(t,e){const i=(new DOMParser).parseFromString(e,"text/html").body.firstChild;return i.className=t,i.style.width=this.getSnapshotRecord().width+"px",i.style.height=this.getSnapshotRecord().height+"px",i.style.display="none",this.container=i}makeItResponsive(){const t=this,e=p(a,500),n=()=>e({target:t.target});window.addEventListener("resize",n,!0),this.options.destroyStore.add((()=>window.removeEventListener("resize",n,!0))),setTimeout((()=>this.container.style.opacity="1")),this.container.style.display="block";let s=0;function r(e){const{setHeight:i,setWidth:n,maxScale:s}=e||{};a({target:t.target},n,i,s)}function a(e,n,r,a=1){return i(this,void 0,void 0,(function*(){if(!e)return;const{width:i,height:l}=(d=t.container,{width:parseInt(d.style.width,10),height:parseInt(d.style.height,10)});var d;switch(n=n||i,r=r||l,a){case 0:s=0;break;case 100:s=100}const c=s||a;if(e.target instanceof Window){const{innerWidth:i,innerHeight:s}=e.target;o(t.container,i,s,n,r,c)}else{const{offsetWidth:i,offsetHeight:s}=e.target;o(t.container,i,s,n,r,c)}}))}function o(t,e,i,n,s,r){const{mode:a}=Ki.getState().player.options||{},o="live"===a?0:38,l=e/n,d=i/(s+o),c=Math.min(l>d?d:l,r||1),h=(n*c-n)/2+(e-n*c)/2,u=(i-s-o*c)/2;t.style.transform=`scale(${c})`,t.style.left=h+"px",t.style.top=u+"px";const p=parseInt(t.style.width),f=parseInt(t.style.height);n===p&&s===f||(t.style.width=n+"px",t.style.height=s+"px",z.emit(En.RESIZE))}return r(),{resize:r}}createStyle(t,e){const i=document.createElement("style");return i.id=t,i.innerHTML=e,i}}class Vn{constructor(t){this.commands=[],this.commandsGetHandle=(t,e,i)=>("push"===e&&this.player&&setTimeout((()=>this.execLastCommand())),Reflect.get(t,e,i)),this.proxyCommands=new Proxy(this.commands,{get:this.commandsGetHandle}),this.getPlayer(),z.on(En.INIT,(()=>{var e;const{player:i}=(null===(e=null==t?void 0:t.c)||void 0===e?void 0:e.panel)||{};this.player=i,this.initResolve(this.player),this.execLastCommand()}))}command(t){this.proxyCommands.push(t)}execLastCommand(){let t;for(;t=this.commands.shift();){const{cmd:e,value:i}=t;this.getPlayer().then((t=>{switch(e){case"jump":const{startTime:e}=Ki.getState().progress;this.player.jump({index:0,time:e+i});case"speed":Ki.dispatch({type:Vi.SPEED,data:{speed:i}});break;case"pause":t.pause()}}))}}get duration(){const{duration:t}=Ki.getState().progress;return t}get paused(){return 0===this.player.speed}get frames(){return{index:this.player.frameIndex,total:this.player.frames.length}}get currentTime(){const{duration:t}=Ki.getState().progress,{index:e,total:i}=this.frames;return+(e/i*t).toFixed(0)}set currentTime(t){this.setCurrentTime(t)}setCurrentTime(t){return i(this,void 0,void 0,(function*(){this.command({cmd:"jump",value:t})}))}getPlayer(){return i(this,void 0,void 0,(function*(){return yield new Promise((t=>{this.initResolve?t(this.player):this.initResolve=t}))}))}play(){return i(this,void 0,void 0,(function*(){this.command({cmd:"speed",value:1})}))}pause(){return i(this,void 0,void 0,(function*(){this.command({cmd:"pause"})}))}}const Wn={autoplay:!0,mode:"default",target:window,heatPoints:!0,timeMode:"durationTime",fastForward:[2,8],disableScrolling:!0};class Yn{constructor(t){this.destroyStore=new Set,this.initialized=!1,this.triggerCalcProgress=p((()=>this.calcProgress()),500),this.getCtrl=()=>this.ctrl,C.reset(),this.init(t),this.watchData(),this.ctrl=new Vn(this)}watchData(t){if(t&&!this.initialized){this.initialized=!0;const e=this.options,{records:n,packs:s,currentData:r}=t,{audio:a}=r,o=a&&(a.src||a.wavStrList.length||a.pcmStrList.length);if(this.c=new Zn(e),function(t){t.container.querySelector(".player-start-page").setAttribute("style","")}(this.c),(this.fmp=new M).ready((()=>i(this,void 0,void 0,(function*(){o&&(yield function(t){return i(this,void 0,void 0,(function*(){const e=function(t){const e=t.querySelector(".player-start-page").querySelector(".play-btn");return e.classList.add("show"),e}(t);return new Promise((t=>{e.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){e.classList.remove("show"),yield u(500),t()}))))}))}))}(this.c.container)),function(t){var e;const i=t.querySelector(".player-start-page");null===(e=null==i?void 0:i.parentElement)||void 0===e||e.removeChild(i)}(this.c.container),n.length&&(e.autoplay||o)&&e.autoplay&&Ki.dispatch({type:Vi.SPEED,data:{speed:1}})})))),s.length&&this.calcProgress(),n.length<=2){Ki.dispatch({type:Vi.OPTIONS,data:{options:{mode:"live"}}});const t=this.c.panel.target;t&&t.setAttribute("style","display: none")}}}init(t){m(),this.initOptions(t),this.initData()}initOptions(t){return i(this,void 0,void 0,(function*(){const e=Object.assign(Object.assign({destroyStore:this.destroyStore},Wn),t);this.options=e,Ki.dispatch({type:Vi.OPTIONS,data:{options:e}}),this.destroyStore.add((()=>Ki.unsubscribe()))}))}initData(){return i(this,void 0,void 0,(function*(){const t=this.options,e=yield this.getRecords(t);window.G_REPLAY_RECORDS=e;const i=Wi(e),n=sn(i[0]);Ki.dispatch({type:Gi.UPDATE_DATA,data:{records:e,packs:i,currentData:n}})}))}getRecords(t){return i(this,void 0,void 0,(function*(){const{receiver:e,records:i}=t,n=i||e&&(yield this.dataReceiver(e))||rn()||(yield an());if(!n)throw o("Replay data not found");return n}))}calcProgress(){const{packs:t}=Ki.getState().replayData,e=t[0][0].time;let i=0;const n=[];let s=0;t.forEach(((e,r)=>{const a=e[0].time,o=e.slice(-1)[0].time;r&&(s+=a-t[r-1].slice(-1)[0].time);const l={startTime:a,endTime:o,duration:o-a,diffTime:s};n.push(l),i+=l.duration}));Ki.dispatch({type:Hi.PROGRESS,data:{duration:i,packsInfo:n,startTime:e,endTime:e+i}})}dispatchEvent(t,e){const i=new CustomEvent(t,{detail:e});window.dispatchEvent(i)}dataReceiver(t){return i(this,void 0,void 0,(function*(){let e,i,s;return yield new Promise((r=>{t((t=>{e?this.dispatchEvent("record-data",t):(t.type===n.HEAD?i=t:t.type===n.SNAPSHOT&&(s=t),i&&s&&(e=!0,r([i,s]),this.dispatchEvent("record-data",t)))}))}))}))}destroy(t={removeDOM:!0}){var e;return i(this,void 0,void 0,(function*(){if(this.destroyStore.forEach((t=>t())),z.destroy(),Ki.unsubscribe(),yield u(0),Object.keys(window).filter((t=>{if(t&&(t.startsWith("G_RECORD")||t.startsWith("G_REPLAY")))return!0})).forEach((t=>{delete window[t]})),t.removeDOM){const t=this.c.shadowHost;null===(e=this.c.shadowHost.parentElement)||void 0===e||e.removeChild(t)}}))}on(t,e){z.on(t,e)}append(t){return i(this,void 0,void 0,(function*(){yield u(0),Ki.dispatch({type:Gi.APPEND_RECORDS,data:{records:t}}),this.triggerCalcProgress()}))}}e([un((t=>({currentData:t.replayData.currentData,records:t.replayData.records,packs:t.replayData.packs})))],Yn.prototype,"watchData",null),t.Player=class{constructor(t){this.on=g,this.destroy=g,this.append=g,this.getCtrl=g;const e=new Yn(t);Object.keys(this).forEach((t=>{this[t]=e[t].bind(e)}))}},t.PlayerModule=Yn,t.createReplayDocument=_n,t.exportReplay=vn,Object.defineProperty(t,"__esModule",{value:!0})}(this.window=this.window||{});
//# sourceMappingURL=player.global.prod.js.map
